!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.bybitapi=t():e.bybitapi=t()}(self,(()=>(()=>{var e={6325:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function o(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AccountAssetClientV3=void 0;const s=r(3612),o=n(r(1154));class a extends o.default{getClientType(){return s.REST_CLIENT_TYPE_ENUM.v3}fetchServerTime(){return i(this,void 0,void 0,(function*(){const e=yield this.getServerTime();return Number(e.time)}))}getServerTime(){return this.get("/v3/public/time")}createInternalTransfer(e){return this.postPrivate("/asset/v3/private/transfer/inter-transfer",e)}getInternalTransfers(e){return this.getPrivate("/asset/v3/private/transfer/inter-transfer/list/query",e)}createSubAccountTransfer(e){return this.postPrivate("/asset/v3/private/transfer/sub-member-transfer",e)}getSubAccountTransfers(e){return this.getPrivate("/asset/v3/private/transfer/sub-member-transfer/list/query",e)}getSubAccounts(){return this.getPrivate("/asset/v3/private/transfer/sub-member/list/query")}enableUniversalTransfer(e){return this.postPrivate("/asset/v3/private/transfer/transfer-sub-member-save",e)}createUniversalTransfer(e){return this.postPrivate("/asset/v3/private/transfer/universal-transfer",e)}getUniversalTransfers(e){return this.getPrivate("/asset/v3/private/transfer/universal-transfer/list/query",e)}getTransferableCoinList(e){return this.getPrivate("/asset/v3/private/transfer/transfer-coin/list/query",e)}getAccountCoinBalance(e){return this.getPrivate("/asset/v3/private/transfer/account-coin/balance/query",e)}getAccountCoinBalances(e){return this.getPrivate("/asset/v3/private/transfer/account-coins/balance/query",e)}getAssetInfo(e){return this.getPrivate("/asset/v3/private/transfer/asset-info/query",e)}getSupportedDepositList(e){return this.get("/asset/v3/public/deposit/allowed-deposit-list/query",e)}getDepositRecords(e){return this.getPrivate("/asset/v3/private/deposit/record/query",e)}getSubDepositRecords(e){return this.getPrivate("/asset/v3/private/deposit/sub-member-record/query",e)}getWithdrawRecords(e){return this.getPrivate("/asset/v3/private/withdraw/record/query",e)}getCoinInformation(e){return this.getPrivate("/asset/v3/private/coin-info/query",{coin:e})}submitWithdrawal(e){return this.postPrivate("/asset/v3/private/withdraw/create",e)}cancelWithdrawal(e){return this.postPrivate("/asset/v3/private/withdraw/create",{withdrawalId:e})}getMasterAccountDepositAddress(e){return this.getPrivate("/asset/v3/private/deposit/address/query",e)}getSubAccountDepositAddress(e){return this.getPrivate("/asset/v3/private/deposit/sub-member-address/query",e)}createSubMember(e){return this.postPrivate("/user/v3/private/create-sub-member",e)}createSubAPIKey(e){return this.postPrivate("/user/v3/private/create-sub-api",e)}getSubMembers(){return this.getPrivate("/user/v3/private/query-sub-members")}freezeSubMember(e,t){return this.postPrivate("/user/v3/private/frozen-sub-member",{subuid:e,frozen:t})}getAPIKeyInformation(){return this.getPrivate("/user/v3/private/query-api")}modifyMasterAPIKey(e){return this.postPrivate("/user/v3/private/update-api",e)}modifySubAPIKey(e){return this.postPrivate("/user/v3/private/update-sub-api",e)}deleteMasterAPIKey(){return this.postPrivate("/user/v3/private/delete-api")}deleteSubAPIKey(){return this.postPrivate("/user/v3/private/delete-sub-api")}}t.AccountAssetClientV3=a},6313:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function o(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AccountAssetClient=void 0;const s=r(3612),o=n(r(1154));class a extends o.default{getClientType(){return s.REST_CLIENT_TYPE_ENUM.accountAsset}fetchServerTime(){return i(this,void 0,void 0,(function*(){const e=yield this.getServerTime();return Number(e.time_now)}))}createInternalTransfer(e){return this.postPrivate("/asset/v1/private/transfer",e)}createSubAccountTransfer(e){return this.postPrivate("/asset/v1/private/sub-member/transfer",e)}getInternalTransfers(e){return this.getPrivate("/asset/v1/private/transfer/list",e)}getSubAccountTransfers(e){return this.getPrivate("/asset/v1/private/sub-member/transfer/list",e)}getSubAccounts(){return this.getPrivate("/asset/v1/private/sub-member/member-ids")}enableUniversalTransfer(e){return this.postPrivate("/asset/v1/private/transferable-subs/save",e)}createUniversalTransfer(e){return this.postPrivate("/asset/v1/private/universal/transfer",e)}getUniversalTransfers(e){return this.getPrivate("/asset/v1/private/universal/transfer/list",e)}getSupportedDepositList(e){return this.get("/asset/v1/public/deposit/allowed-deposit-list",e)}getDepositRecords(e){return this.getPrivate("/asset/v1/private/deposit/record/query",e)}getWithdrawRecords(e){return this.getPrivate("/asset/v1/private/withdraw/record/query",e)}getCoinInformation(e){return this.getPrivate("/asset/v1/private/coin-info/query",{coin:e})}getAssetInformation(e){return this.getPrivate("/asset/v1/private/asset-info/query",e)}submitWithdrawal(e){return this.postPrivate("/asset/v1/private/withdraw",e)}cancelWithdrawal(e){return this.postPrivate("/asset/v1/private/withdraw/cancel",{id:e})}getDepositAddress(e){return this.getPrivate("/asset/v1/private/deposit/address",{coin:e})}getServerTime(){return this.get("/v2/public/time")}getApiAnnouncements(){return this.get("/v2/public/announcement")}}t.AccountAssetClient=a},708:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.LinearPositionIdx=t.API_ERROR_CODE=t.positionTpSlModeEnum=t.linearPositionModeEnum=void 0,t.linearPositionModeEnum={OneWayMode:"MergedSingle",HedgeMode:"BothSide"},t.positionTpSlModeEnum={Full:"Full",Partial:"Partial"},t.API_ERROR_CODE={BALANCE_INSUFFICIENT_SPOT:-1131,ORDER_NOT_FOUND_OR_TOO_LATE_SPOT:-2013,SUCCESS:0,PARAMS_MISSING_OR_WRONG:10001,INVALID_API_KEY_OR_PERMISSIONS:10003,SIGNATURE_NOT_VALID:10004,INCORRECT_API_KEY_PERMISSIONS:10005,INCORRECT_API_REQUEST_IP:10010,DB_ERROR_WRONG_CURSOR:10016,ACCOUNT_NOT_UNIFIED:10020,UNKNOWN_ERROR:12e3,BALANCE_INSUFFICIENT_SPOT_V3:12131,ORDER_NOT_FOUND_SPOT_V3:12213,ORDER_NOT_FOUND_LEVERAGED_TOKEN:12407,EXCEEDED_UPPER_LIMIT_LEVERAGED_TOKEN:12409,QUERY_ACCOUNT_INFO_ERROR:12602,CROSS_MARGIN_USER_NOT_FOUND:12607,CROSS_MARGIN_REPAYMENT_NOT_REQUIRED:12616,CROSS_MARGIN_NOT_ENABLED:12640,ORDER_NOT_FOUND_OR_TOO_LATE:20001,POSITION_STATUS_NOT_NORMAL:30013,CANNOT_SET_TRADING_STOP_FOR_ZERO_POS:30024,INSUFFICIENT_BALANCE_FOR_ORDER_COST:30031,POSITION_IDX_NOT_MATCH_POSITION_MODE:30041,INSUFFICIENT_BALANCE:30042,POSITION_IS_CROSS_MARGIN:30056,POSITION_MODE_NOT_MODIFIED:30083,ISOLATED_NOT_MODIFIED:30084,RISK_LIMIT_NOT_EXISTS:30090,SUB_USER_ALREADY_EXISTS:31005,LEVERAGE_NOT_MODIFIED:34036,SAME_SLTP_MODE:37002,COPY_TRADE_NOT_OPEN_ORDER:39426,V5_ORDER_NOT_FOUND:110001,V5_INSUFFICIENT_BALANCE:110007,V5_API_KEY_PERMISSION_DENIED:10005,V5_CROSS_ISOLATED_MARGIN_NOT_CHANGED:110026,V5_LEVERAGE_NOT_CHANGED:110043,V5_MARGIN_MODE_NOT_CHANGED:110073,V5_TPSL_NOT_CHANGED:10001,V5_RISK_ID_NOT_CHANGED:10001,V5_AUTO_ADD_MARGIN_NOT_CHANGED:10001,V5_TPSL_ERROR_NO_POSITION:10001,V5_RISK_ID_NOT_MODIFIED:110075,QTY_EXCEEDS_MAX_LIMIT:130006,ORDER_NOT_FOUND_OR_TOO_LATE_LINEAR:130010,ORDER_COST_NOT_AVAILABLE:130021,CANNOT_SET_LINEAR_TRADING_STOP_FOR_ZERO_POS:130024,ISOLATED_NOT_MODIFIED_LINEAR:130056,POSITION_SIZE_IS_ZERO:130057,AUTO_ADD_MARGIN_NOT_MODIFIED:130060,INSUFFICIENT_BALANCE_FOR_ORDER_COST_LINEAR:130080,SAME_SLTP_MODE_LINEAR:130150,NOT_SUPPORTED_FOR_SUBACCOUNTS:131003,TRANSFER_ID_EXISTS:131214,RISK_ID_NOT_MODIFIED:134026,CONTRACT_ORDER_NOT_EXISTS:140001,CONTRACT_INSUFFICIENT_BALANCE:140007,CONTRACT_POSITION_MODE_NOT_MODIFIED:140025,CONTRACT_MARGIN_MODE_NOT_MODIFIED:140026,CONTRACT_RISK_LIMIT_INFO_NOT_EXISTS:140031,CONTRACT_SET_LEVERAGE_NOT_MODIFIED:140043,SUB_USER_NOT_FOUND:141009,SPOT_LEVERAGE_TOKEN_INSUFFICIENT_BALANCE:175006,SPOT_LEVERAGE_TOKEN_ORDER_NOT_FOUND:175007,SPOT_LEVERAGE_QUIZ_REQUIRED:175010,SPOT_MARGIN_NOT_ENABLED:176008,SPOT_MARGIN_QUESTIONNAIRE_NOT_SUBMIT:176037,CONTRACT_NAME_NOT_EXIST:3100111,ORDER_NOT_EXIST:3100136,NO_ACTIVE_ORDER:3100205,ACCOUNT_NOT_EXIST:3200200,INCORRECT_PRIVATE_OPERATIONS:3303001,SET_MARGIN_MODE_FAILED_USDC:3400045,INCORRECT_MMP_PARAMETERS:3500712,INSTITION_MMP_PROFILE_NOT_FOUND:3500713},function(e){e[e.OneWayMode=0]="OneWayMode",e[e.BuySide=1]="BuySide",e[e.SellSide=2]="SellSide"}(r||(t.LinearPositionIdx=r={}))},8873:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function o(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ContractClient=void 0;const s=r(3612),o=n(r(1154));class a extends o.default{getClientType(){return s.REST_CLIENT_TYPE_ENUM.v3}fetchServerTime(){return i(this,void 0,void 0,(function*(){const e=yield this.getServerTime();return Number(e.time_now)}))}getOrderBook(e,t,r){return this.get("/derivatives/v3/public/order-book/L2",{category:t,symbol:e,limit:r})}getCandles(e){return this.get("/derivatives/v3/public/kline",e)}getSymbolTicker(e,t){return this.get("/derivatives/v3/public/tickers",{category:e,symbol:t})}getInstrumentInfo(e){return this.get("/derivatives/v3/public/instruments-info",e)}getMarkPriceCandles(e){return this.get("/derivatives/v3/public/mark-price-kline",e)}getIndexPriceCandles(e){return this.get("/derivatives/v3/public/index-price-kline",e)}getFundingRateHistory(e){return this.get("/derivatives/v3/public/funding/history-funding-rate",e)}getRiskLimit(e,t){return this.get("/derivatives/v3/public/risk-limit/list",{category:e,symbol:t})}getOptionDeliveryPrice(e){return this.get("/derivatives/v3/public/delivery-price",e)}getTrades(e){return this.get("/derivatives/v3/public/recent-trade",e)}getOpenInterest(e){return this.get("/derivatives/v3/public/open-interest",e)}submitOrder(e){return this.postPrivate("/contract/v3/private/order/create",e)}getHistoricOrders(e){return this.getPrivate("/contract/v3/private/order/list",e)}cancelOrder(e){return this.postPrivate("/contract/v3/private/order/cancel",e)}cancelAllOrders(e){return this.postPrivate("/contract/v3/private/order/cancel-all",{symbol:e})}modifyOrder(e){return this.postPrivate("/contract/v3/private/order/replace",e)}getActiveOrders(e){return this.getPrivate("/contract/v3/private/order/unfilled-orders",e)}getPositions(e){return this.getPrivate("/contract/v3/private/position/list",e)}setAutoAddMargin(e){return this.postPrivate("/contract/v3/private/position/set-auto-add-margin",e)}setMarginSwitch(e){return this.postPrivate("/contract/v3/private/position/switch-isolated",e)}setPositionMode(e){return this.postPrivate("/contract/v3/private/position/switch-mode",e)}setTPSLMode(e,t){return this.postPrivate("/contract/v3/private/position/switch-tpsl-mode",{symbol:e,tpSlMode:t})}setLeverage(e,t,r){return this.postPrivate("/contract/v3/private/position/set-leverage",{symbol:e,buyLeverage:t,sellLeverage:r})}setTPSL(e){return this.postPrivate("/contract/v3/private/position/trading-stop",e)}setRiskLimit(e,t,r){return this.postPrivate("/contract/v3/private/position/set-risk-limit",{symbol:e,riskId:t,positionIdx:r})}getUserExecutionHistory(e){return this.getPrivate("/contract/v3/private/execution/list",e)}getClosedProfitAndLoss(e){return this.getPrivate("/contract/v3/private/position/closed-pnl",e)}getOpenInterestLimitInfo(e){return this.getPrivate("/contract/v3/private/position/limit-info",{symbol:e})}getBalances(e){return this.getPrivate("/contract/v3/private/account/wallet/balance",{coin:e})}getTradingFeeRate(e){return this.getPrivate("/contract/v3/private/account/fee-rate",{symbol:e})}getWalletFundRecords(e){return this.getPrivate("/contract/v3/private/account/wallet/fund-records",e)}getServerTime(){return this.get("/v2/public/time")}}t.ContractClient=a},4152:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function o(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CopyTradingClient=void 0;const s=r(3612),o=n(r(1154));class a extends o.default{getClientType(){return s.REST_CLIENT_TYPE_ENUM.v3}fetchServerTime(){return i(this,void 0,void 0,(function*(){const e=yield this.getServerTime();return Number(e.time_now)}))}getSymbols(){return this.get("/contract/v3/public/copytrading/symbol/list")}submitOrder(e){return this.postPrivate("/contract/v3/private/copytrading/order/create",e)}setTradingStop(e){return this.postPrivate("/contract/v3/private/copytrading/order/trading-stop",e)}getActiveOrders(e){return this.getPrivate("/contract/v3/private/copytrading/order/list",e)}cancelOrder(e){return this.postPrivate("/contract/v3/private/copytrading/order/cancel",e)}closeOrder(e){return this.postPrivate("/contract/v3/private/copytrading/order/close",e)}getPositions(e){return this.getPrivate("/contract/v3/private/copytrading/position/list",{symbol:e})}closePosition(e,t){return this.postPrivate("/contract/v3/private/copytrading/position/close",{symbol:e,positionIdx:t})}setLeverage(e,t,r){return this.postPrivate("/contract/v3/private/copytrading/position/set-leverage",{symbol:e,buyLeverage:t,sellLeverage:r})}getBalances(){return this.getPrivate("/contract/v3/private/copytrading/wallet/balance")}transfer(e){return this.postPrivate("/contract/v3/private/copytrading/wallet/transfer",e)}getServerTime(){return this.get("/v2/public/time")}getAnnouncements(){return this.get("/v2/public/announcement")}}t.CopyTradingClient=a},3867:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(6313),t),n(r(6325),t),n(r(4152),t),n(r(6011),t),n(r(4724),t),n(r(4624),t),n(r(827),t),n(r(5847),t),n(r(3327),t),n(r(6732),t),n(r(9065),t),n(r(962),t),n(r(8873),t),n(r(6118),t),n(r(2818),t),n(r(3612),t),n(r(8105),t),n(r(708),t)},6011:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function o(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.InverseClient=void 0;const s=r(3612),o=n(r(1154));class a extends o.default{getClientType(){return s.REST_CLIENT_TYPE_ENUM.inverse}fetchServerTime(){return i(this,void 0,void 0,(function*(){const e=yield this.getServerTime();return Number(e.time_now)}))}getOrderBook(e){return this.get("v2/public/orderBook/L2",e)}getKline(e){return this.get("v2/public/kline/list",e)}getTickers(e){return this.get("v2/public/tickers",e)}getTrades(e){return this.get("v2/public/trading-records",e)}getSymbols(){return this.get("v2/public/symbols")}getMarkPriceKline(e){return this.get("v2/public/mark-price-kline",e)}getIndexPriceKline(e){return this.get("v2/public/index-price-kline",e)}getPremiumIndexKline(e){return this.get("v2/public/premium-index-kline",e)}getOpenInterest(e){return this.get("v2/public/open-interest",e)}getLatestBigDeal(e){return this.get("v2/public/big-deal",e)}getLongShortRatio(e){return this.get("v2/public/account-ratio",e)}getApiKeyInfo(){return this.getPrivate("v2/private/account/api-key")}getWalletBalance(e){return this.getPrivate("v2/private/wallet/balance",e)}getWalletFundRecords(e){return this.getPrivate("v2/private/wallet/fund/records",e)}getWithdrawRecords(e){return this.getPrivate("v2/private/wallet/withdraw/list",e)}getAssetExchangeRecords(e){return this.getPrivate("v2/private/exchange-order/list",e)}getServerTime(){return this.get("v2/public/time")}getApiAnnouncements(){return this.get("v2/public/announcement")}placeActiveOrder(e){return this.postPrivate("v2/private/order/create",e)}getActiveOrderList(e){return this.getPrivate("v2/private/order/list",e)}cancelActiveOrder(e){return this.postPrivate("v2/private/order/cancel",e)}cancelAllActiveOrders(e){return this.postPrivate("v2/private/order/cancelAll",e)}replaceActiveOrder(e){return this.postPrivate("v2/private/order/replace",e)}queryActiveOrder(e){return this.getPrivate("v2/private/order",e)}placeConditionalOrder(e){return this.postPrivate("v2/private/stop-order/create",e)}getConditionalOrder(e){return this.getPrivate("v2/private/stop-order/list",e)}cancelConditionalOrder(e){return this.postPrivate("v2/private/stop-order/cancel",e)}cancelAllConditionalOrders(e){return this.postPrivate("v2/private/stop-order/cancelAll",e)}replaceConditionalOrder(e){return this.postPrivate("v2/private/stop-order/replace",e)}queryConditionalOrder(e){return this.getPrivate("v2/private/stop-order",e)}getPosition(e){return this.getPrivate("v2/private/position/list",e)}changePositionMargin(e){return this.postPrivate("position/change-position-margin",e)}setTradingStop(e){return this.postPrivate("v2/private/position/trading-stop",e)}setUserLeverage(e){return this.postPrivate("v2/private/position/leverage/save",e)}getTradeRecords(e){return this.getPrivate("v2/private/execution/list",e)}getClosedPnl(e){return this.getPrivate("v2/private/trade/closed-pnl/list",e)}setSlTpPositionMode(e){return this.postPrivate("v2/private/tpsl/switch-mode",e)}setMarginType(e){return this.postPrivate("v2/private/position/switch-isolated",e)}getLastFundingRate(e){return this.get("v2/public/funding/prev-funding-rate",e)}getMyLastFundingFee(e){return this.getPrivate("v2/private/funding/prev-funding",e)}getPredictedFunding(e){return this.getPrivate("v2/private/funding/predicted-funding",e)}getLcpInfo(e){return this.getPrivate("v2/private/account/lcp",e)}}t.InverseClient=a},4724:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function o(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.InverseFuturesClient=void 0;const s=r(8584),o=n(r(1154));class a extends o.default{getClientType(){return s.REST_CLIENT_TYPE_ENUM.inverseFutures}fetchServerTime(){return i(this,void 0,void 0,(function*(){const e=yield this.getServerTime();return Number(e.time_now)}))}getOrderBook(e){return this.get("v2/public/orderBook/L2",e)}getKline(e){return this.get("v2/public/kline/list",e)}getTickers(e){return this.get("v2/public/tickers",e)}getTrades(e){return this.get("v2/public/trading-records",e)}getSymbols(){return this.get("v2/public/symbols")}getMarkPriceKline(e){return this.get("v2/public/mark-price-kline",e)}getIndexPriceKline(e){return this.get("v2/public/index-price-kline",e)}getPremiumIndexKline(e){return this.get("v2/public/premium-index-kline",e)}getOpenInterest(e){return this.get("v2/public/open-interest",e)}getLatestBigDeal(e){return this.get("v2/public/big-deal",e)}getLongShortRatio(e){return this.get("v2/public/account-ratio",e)}getApiKeyInfo(){return this.getPrivate("v2/private/account/api-key")}getWalletBalance(e){return this.getPrivate("v2/private/wallet/balance",e)}getWalletFundRecords(e){return this.getPrivate("v2/private/wallet/fund/records",e)}getWithdrawRecords(e){return this.getPrivate("v2/private/wallet/withdraw/list",e)}getAssetExchangeRecords(e){return this.getPrivate("v2/private/exchange-order/list",e)}getServerTime(){return this.get("v2/public/time")}getApiAnnouncements(){return this.get("v2/public/announcement")}placeActiveOrder(e){return this.postPrivate("futures/private/order/create",e)}getActiveOrderList(e){return this.getPrivate("futures/private/order/list",e)}cancelActiveOrder(e){return this.postPrivate("futures/private/order/cancel",e)}cancelAllActiveOrders(e){return this.postPrivate("futures/private/order/cancelAll",e)}replaceActiveOrder(e){return this.postPrivate("futures/private/order/replace",e)}queryActiveOrder(e){return this.getPrivate("futures/private/order",e)}placeConditionalOrder(e){return this.postPrivate("futures/private/stop-order/create",e)}getConditionalOrder(e){return this.getPrivate("futures/private/stop-order/list",e)}cancelConditionalOrder(e){return this.postPrivate("futures/private/stop-order/cancel",e)}cancelAllConditionalOrders(e){return this.postPrivate("futures/private/stop-order/cancelAll",e)}replaceConditionalOrder(e){return this.postPrivate("futures/private/stop-order/replace",e)}queryConditionalOrder(e){return this.getPrivate("futures/private/stop-order",e)}getPosition(e){return this.getPrivate("futures/private/position/list",e)}changePositionMargin(e){return this.postPrivate("futures/private/position/change-position-margin",e)}setTradingStop(e){return this.postPrivate("futures/private/position/trading-stop",e)}setUserLeverage(e){return this.postPrivate("futures/private/position/leverage/save",e)}setPositionMode(e){return this.postPrivate("futures/private/position/switch-mode",e)}setMarginType(e){return this.postPrivate("futures/private/position/switch-isolated",e)}getTradeRecords(e){return this.getPrivate("futures/private/execution/list",e)}getClosedPnl(e){return this.getPrivate("futures/private/trade/closed-pnl/list",e)}getLastFundingRate(e){return this.get("v2/public/funding/prev-funding-rate",e)}getMyLastFundingFee(e){return this.getPrivate("v2/private/funding/prev-funding",e)}getPredictedFunding(e){return this.getPrivate("v2/private/funding/predicted-funding",e)}getLcpInfo(e){return this.getPrivate("v2/private/account/lcp",e)}}t.InverseFuturesClient=a},4624:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function o(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.LinearClient=void 0;const s=r(8584),o=n(r(1154));class a extends o.default{getClientType(){return s.REST_CLIENT_TYPE_ENUM.linear}fetchServerTime(){return i(this,void 0,void 0,(function*(){const e=yield this.getServerTime();return Number(e.time_now)}))}getOrderBook(e){return this.get("v2/public/orderBook/L2",e)}getKline(e){return this.get("public/linear/kline",e)}getTickers(e){return this.get("v2/public/tickers",e)}getTrades(e){return this.get("public/linear/recent-trading-records",e)}getSymbols(){return this.get("v2/public/symbols")}getLastFundingRate(e){return this.get("public/linear/funding/prev-funding-rate",e)}getMarkPriceKline(e){return this.get("public/linear/mark-price-kline",e)}getIndexPriceKline(e){return this.get("public/linear/index-price-kline",e)}getPremiumIndexKline(e){return this.get("public/linear/premium-index-kline",e)}getOpenInterest(e){return this.get("v2/public/open-interest",e)}getLatestBigDeal(e){return this.get("v2/public/big-deal",e)}getLongShortRatio(e){return this.get("v2/public/account-ratio",e)}getApiKeyInfo(){return this.getPrivate("v2/private/account/api-key")}getWalletBalance(e){return this.getPrivate("v2/private/wallet/balance",e)}getWalletFundRecords(e){return this.getPrivate("v2/private/wallet/fund/records",e)}getWithdrawRecords(e){return this.getPrivate("v2/private/wallet/withdraw/list",e)}getAssetExchangeRecords(e){return this.getPrivate("v2/private/exchange-order/list",e)}getServerTime(){return this.get("v2/public/time")}getApiAnnouncements(){return this.get("v2/public/announcement")}placeActiveOrder(e){return this.postPrivate("private/linear/order/create",e)}getActiveOrderList(e){return this.getPrivate("private/linear/order/list",e)}cancelActiveOrder(e){return this.postPrivate("private/linear/order/cancel",e)}cancelAllActiveOrders(e){return this.postPrivate("private/linear/order/cancel-all",e)}replaceActiveOrder(e){return this.postPrivate("private/linear/order/replace",e)}queryActiveOrder(e){return this.getPrivate("private/linear/order/search",e)}placeConditionalOrder(e){return this.postPrivate("private/linear/stop-order/create",e)}getConditionalOrder(e){return this.getPrivate("private/linear/stop-order/list",e)}cancelConditionalOrder(e){return this.postPrivate("private/linear/stop-order/cancel",e)}cancelAllConditionalOrders(e){return this.postPrivate("private/linear/stop-order/cancel-all",e)}replaceConditionalOrder(e){return this.postPrivate("private/linear/stop-order/replace",e)}queryConditionalOrder(e){return this.getPrivate("private/linear/stop-order/search",e)}getPosition(e){return this.getPrivate("private/linear/position/list",e)}setAutoAddMargin(e){return this.postPrivate("private/linear/position/set-auto-add-margin",e)}setMarginSwitch(e){return this.postPrivate("private/linear/position/switch-isolated",e)}setPositionMode(e){return this.postPrivate("private/linear/position/switch-mode",e)}setPositionTpSlMode(e){return this.postPrivate("private/linear/tpsl/switch-mode",e)}setAddReduceMargin(e){return this.postPrivate("private/linear/position/add-margin",e)}setUserLeverage(e){return this.postPrivate("private/linear/position/set-leverage",e)}setTradingStop(e){return this.postPrivate("private/linear/position/trading-stop",e)}getTradeRecords(e){return this.getPrivate("private/linear/trade/execution/list",e)}getHistoryTradeRecords(e){return this.getPrivate("/private/linear/trade/execution/history-list",e)}getClosedPnl(e){return this.getPrivate("private/linear/trade/closed-pnl/list",e)}getRiskLimitList(e){return this.getPrivate("public/linear/risk-limit",e)}setRiskLimit(e){return this.postPrivate("private/linear/position/set-risk",e)}getPredictedFundingFee(e){return this.getPrivate("private/linear/funding/predicted-funding",e)}getLastFundingFee(e){return this.getPrivate("private/linear/funding/prev-funding",e)}}t.LinearClient=a},827:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function o(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.RestClientV5=void 0;const s=r(3612),o=n(r(1154));class a extends o.default{getClientType(){return s.REST_CLIENT_TYPE_ENUM.v3}fetchServerTime(){return i(this,void 0,void 0,(function*(){const e=yield this.getServerTime();return Number(e.time)/1e3}))}getServerTime(){return this.get("/v3/public/time")}getKline(e){return this.get("/v5/market/kline",e)}getMarkPriceKline(e){return this.get("/v5/market/mark-price-kline",e)}getIndexPriceKline(e){return this.get("/v5/market/index-price-kline",e)}getPremiumIndexPriceKline(e){return this.get("/v5/market/premium-index-price-kline",e)}getInstrumentsInfo(e){return this.get("/v5/market/instruments-info",e)}getOrderbook(e){return this.get("/v5/market/orderbook",e)}getTickers(e){return this.get("/v5/market/tickers",e)}getFundingRateHistory(e){return this.get("/v5/market/funding/history",e)}getPublicTradingHistory(e){return this.get("/v5/market/recent-trade",e)}getOpenInterest(e){return this.get("/v5/market/open-interest",e)}getHistoricalVolatility(e){return this.get("/v5/market/historical-volatility",e)}getInsurance(e){return this.get("/v5/market/insurance",e)}getRiskLimit(e){return this.get("/v5/market/risk-limit",e)}getOptionDeliveryPrice(e){return this.get("/v5/market/delivery-price",e)}getDeliveryPrice(e){return this.get("/v5/market/delivery-price",e)}submitOrder(e){return this.postPrivate("/v5/order/create",e)}amendOrder(e){return this.postPrivate("/v5/order/amend",e)}cancelOrder(e){return this.postPrivate("/v5/order/cancel",e)}getActiveOrders(e){return this.getPrivate("/v5/order/realtime",e)}cancelAllOrders(e){return this.postPrivate("/v5/order/cancel-all",e)}getHistoricOrders(e){return this.getPrivate("/v5/order/history",e)}batchSubmitOrders(e,t){return this.postPrivate("/v5/order/create-batch",{category:e,request:t})}batchAmendOrders(e,t){return this.postPrivate("/v5/order/amend-batch",{category:e,request:t})}batchCancelOrders(e,t){return this.postPrivate("/v5/order/cancel-batch",{category:e,request:t})}getSpotBorrowCheck(e,t){return this.getPrivate("/v5/order/spot-borrow-check",{category:"spot",symbol:e,side:t})}setDisconnectCancelAllWindow(e,t){return this.postPrivate("/v5/order/disconnected-cancel-all",{category:e,timeWindow:t})}getPositionInfo(e){return this.getPrivate("/v5/position/list",e)}setLeverage(e){return this.postPrivate("/v5/position/set-leverage",e)}switchIsolatedMargin(e){return this.postPrivate("/v5/position/switch-isolated",e)}setTPSLMode(e){return this.postPrivate("/v5/position/set-tpsl-mode",e)}switchPositionMode(e){return this.postPrivate("/v5/position/switch-mode",e)}setRiskLimit(e){return this.postPrivate("/v5/position/set-risk-limit",e)}setTradingStop(e){return this.postPrivate("/v5/position/trading-stop",e)}setAutoAddMargin(e){return this.postPrivate("/v5/position/set-auto-add-margin",e)}addOrReduceMargin(e){return this.postPrivate("/v5/position/add-margin",e)}getExecutionList(e){return this.getPrivate("/v5/execution/list",e)}getClosedPnL(e){return this.getPrivate("/v5/position/closed-pnl",e)}getPreUpgradeOrderHistory(e){return this.getPrivate("/v5/pre-upgrade/order/history",e)}getPreUpgradeTradeHistory(e){return this.getPrivate("/v5/pre-upgrade/execution/list",e)}getPreUpgradeClosedPnl(e){return this.getPrivate("/v5/pre-upgrade/position/closed-pnl",e)}getWalletBalance(e){return this.getPrivate("/v5/account/wallet-balance",e)}upgradeToUnifiedAccount(){return this.postPrivate("/v5/account/upgrade-to-uta")}getBorrowHistory(e){return this.getPrivate("/v5/account/borrow-history",e)}repayLiability(e){return this.postPrivate("/v5/account/quick-repayment",e)}setCollateralCoin(e){return this.postPrivate("/v5/account/set-collateral-switch",e)}batchSetCollateralCoin(e){return this.postPrivate("/v5/account/set-collateral-switch-batch",e)}getCollateralInfo(e){return this.getPrivate("/v5/account/collateral-info",{currency:e})}getCoinGreeks(e){return this.getPrivate("/v5/asset/coin-greeks",e?{baseCoin:e}:void 0)}getFeeRate(e){return this.getPrivate("/v5/account/fee-rate",e)}getAccountInfo(){return this.getPrivate("/v5/account/info")}getTransactionLog(e){return this.getPrivate("/v5/account/transaction-log",e)}setMarginMode(e){return this.postPrivate("/v5/account/set-margin-mode",{setMarginMode:e})}setMMP(e){return this.postPrivate("/v5/account/mmp-modify",e)}resetMMP(e){return this.postPrivate("/v5/account/mmp-reset",{baseCoin:e})}getMMPState(e){return this.getPrivate("/v5/account/mmp-state",{baseCoin:e})}getCoinExchangeRecords(e){return this.getPrivate("/v5/asset/exchange/order-record",e)}getDeliveryRecord(e){return this.getPrivate("/v5/asset/delivery-record",e)}getSettlementRecords(e){return this.getPrivate("/v5/asset/settlement-record",e)}getAssetInfo(e){return this.getPrivate("/v5/asset/transfer/query-asset-info",e)}getAllCoinsBalance(e){return this.getPrivate("/v5/asset/transfer/query-account-coins-balance",e)}getCoinBalance(e){return this.getPrivate("/v5/asset/transfer/query-account-coin-balance",e)}getTransferableCoinList(e,t){return this.getPrivate("/v5/asset/transfer/query-transfer-coin-list",{fromAccountType:e,toAccountType:t})}createInternalTransfer(e,t,r,i,n){return this.postPrivate("/v5/asset/transfer/inter-transfer",{transferId:e,coin:t,amount:r,fromAccountType:i,toAccountType:n})}getInternalTransferRecords(e){return this.getPrivate("/v5/asset/transfer/query-inter-transfer-list",e)}getSubUID(){return this.getPrivate("/v5/asset/transfer/query-sub-member-list")}enableUniversalTransferForSubUIDs(e){return this.postPrivate("/v5/asset/transfer/save-transfer-sub-member",{subMemberIds:e})}createUniversalTransfer(e){return this.postPrivate("/v5/asset/transfer/universal-transfer",e)}getUniversalTransferRecords(e){return this.getPrivate("/v5/asset/transfer/query-universal-transfer-list",e)}getAllowedDepositCoinInfo(e){return this.get("/v5/asset/deposit/query-allowed-list",e)}setDepositAccount(e){return this.postPrivate("/v5/asset/deposit/deposit-to-account",e)}getDepositRecords(e){return this.getPrivate("/v5/asset/deposit/query-record",e)}getSubAccountDepositRecords(e){return this.getPrivate("/v5/asset/deposit/query-sub-member-record",e)}getInternalDepositRecords(e){return this.getPrivate("/v5/asset/deposit/query-internal-record",e)}getMasterDepositAddress(e,t){return this.getPrivate("/v5/asset/deposit/query-address",{coin:e,chainType:t})}getSubDepositAddress(e,t,r){return this.getPrivate("/v5/asset/deposit/query-sub-member-address",{coin:e,chainType:t,subMemberId:r})}querySubMemberAddress(e,t,r){return this.getPrivate("/v5/asset/deposit/query-sub-member-address",{coin:e,chainType:t,subMemberId:r})}getCoinInfo(e){return this.getPrivate("/v5/asset/coin/query-info",e?{coin:e}:void 0)}getWithdrawalRecords(e){return this.getPrivate("/v5/asset/withdraw/query-record",e)}getWithdrawableAmount(e){return this.getPrivate("/v5/asset/withdraw/withdrawable-amount",e)}submitWithdrawal(e){return this.postPrivate("/v5/asset/withdraw/create",e)}cancelWithdrawal(e){return this.postPrivate("/v5/asset/withdraw/cancel",{id:e})}createSubMember(e){return this.postPrivate("/v5/user/create-sub-member",e)}createSubUIDAPIKey(e){return this.postPrivate("/v5/user/create-sub-api",e)}getSubUIDList(){return this.getPrivate("/v5/user/query-sub-members")}setSubUIDFrozenState(e,t){return this.postPrivate("/v5/user/frozen-sub-member",{subuid:e,frozen:t})}getQueryApiKey(){return this.getPrivate("/v5/user/query-api")}updateMasterApiKey(e){return this.postPrivate("/v5/user/update-api",e)}updateSubApiKey(e){return this.postPrivate("/v5/user/update-sub-api",e)}deleteMasterApiKey(){return this.postPrivate("/v5/user/delete-api")}deleteSubApiKey(){return this.postPrivate("/v5/user/delete-sub-api")}deleteSubMember(e){return this.postPrivate("/v5/user/del-submember",e)}getLeveragedTokenInfo(e){return this.get("/v5/spot-lever-token/info",{ltCoin:e})}getLeveragedTokenMarket(e){return this.get("/v5/spot-lever-token/reference",{ltCoin:e})}purchaseSpotLeveragedToken(e){return this.postPrivate("/v5/spot-lever-token/purchase",e)}redeemSpotLeveragedToken(e){return this.postPrivate("/v5/spot-lever-token/redeem",e)}getSpotLeveragedTokenOrderHistory(e){return this.getPrivate("/v5/spot-lever-token/order-record",e)}toggleSpotMarginTrade(e){return this.postPrivate("/v5/spot-margin-trade/switch-mode",{spotMarginMode:e})}setSpotMarginLeverage(e){return this.postPrivate("/v5/spot-margin-trade/set-leverage",{leverage:e})}getSpotMarginCoinInfo(e){return this.getPrivate("/v5/spot-cross-margin-trade/pledge-token",{coin:e})}getSpotMarginBorrowableCoinInfo(e){return this.getPrivate("/v5/spot-cross-margin-trade/borrow-token",{coin:e})}getSpotMarginInterestAndQuota(e){return this.getPrivate("/v5/spot-cross-margin-trade/loan-info",{coin:e})}getSpotMarginLoanAccountInfo(){return this.getPrivate("/v5/spot-cross-margin-trade/account")}spotMarginBorrow(e){return this.postPrivate("/v5/spot-cross-margin-trade/loan",e)}spotMarginRepay(e){return this.postPrivate("/v5/spot-cross-margin-trade/repay",e)}getSpotMarginBorrowOrderDetail(e){return this.getPrivate("/v5/spot-cross-margin-trade/orders",e)}getSpotMarginRepaymentOrderDetail(e){return this.getPrivate("/v5/spot-cross-margin-trade/repay-history",e)}toggleSpotCrossMarginTrade(e){return this.postPrivate("/v5/spot-cross-margin-trade/switch",e)}getInstitutionalLendingProductInfo(e){return this.get("/v5/ins-loan/product-infos",{productId:e})}getInstitutionalLendingMarginCoinInfo(e){return this.get("/v5/ins-loan/ensure-tokens",{productId:e})}getInstitutionalLendingMarginCoinInfoWithConversionRate(e){return this.get("/v5/ins-loan/ensure-tokens-convert",{productId:e})}getInstitutionalLendingLoanOrders(e){return this.getPrivate("/v5/ins-loan/loan-order",e)}getInstitutionalLendingRepayOrders(e){return this.getPrivate("/v5/ins-loan/repaid-history",e)}getInstitutionalLendingLTV(){return this.getPrivate("/v5/ins-loan/ltv")}getInstitutionalLendingLTVWithLadderConversionRate(){return this.getPrivate("/v5/ins-loan/ltv-convert")}}t.RestClientV5=a},3327:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function o(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SpotClientV3=void 0;const s=r(3612),o=n(r(1154));class a extends o.default{getClientType(){return s.REST_CLIENT_TYPE_ENUM.v3}fetchServerTime(){return i(this,void 0,void 0,(function*(){const e=yield this.getServerTime();return Number(e.time_now)}))}getSymbols(){return this.get("/spot/v3/public/symbols")}getOrderBook(e,t){return this.get("/spot/v3/public/quote/depth",{symbol:e,limit:t})}getMergedOrderBook(e,t,r){return this.get("/spot/v3/public/quote/depth/merged",{symbol:e,scale:t,limit:r})}getTrades(e,t){return this.get("/spot/v3/public/quote/trades",{symbol:e,limit:t})}getCandles(e,t,r,i,n){return this.get("/spot/v3/public/quote/kline",{symbol:e,interval:t,limit:r,startTime:i,endTime:n})}get24hrTicker(e){return this.get("/spot/v3/public/quote/ticker/24hr",{symbol:e})}getLastTradedPrice(e){return this.get("/spot/v3/public/quote/ticker/price",{symbol:e})}getBestBidAskPrice(e){return this.get("/spot/v3/public/quote/ticker/bookTicker",{symbol:e})}submitOrder(e){return this.postPrivate("/spot/v3/private/order",e)}getOrder(e){return this.getPrivate("/spot/v3/private/order",e)}cancelOrder(e){return this.postPrivate("/spot/v3/private/cancel-order",e)}cancelOrderBatch(e){const t=e.orderTypes?e.orderTypes.join(","):void 0;return this.postPrivate("/spot/v3/private/cancel-orders",Object.assign(Object.assign({},e),{orderTypes:t}))}cancelOrderBatchIDs(e){const t=e.join(",");return this.postPrivate("/spot/v3/private/cancel-orders-by-ids",{orderIds:t})}getOpenOrders(e,t,r,i){return this.getPrivate("/spot/v3/private/open-orders",{symbol:e,orderId:t,limit:r,orderCategory:i})}getPastOrders(e,t,r,i){return this.getPrivate("/spot/v3/private/history-orders",{symbol:e,orderId:t,limit:r,orderCategory:i})}getMyTrades(e){return this.getPrivate("/spot/v3/private/my-trades",e)}getBalances(){return this.getPrivate("/spot/v3/private/account")}getServerTime(){return this.get("/v2/public/time")}getLeveragedTokenAssetInfos(e){return this.get("/spot/v3/public/infos",{ltCode:e})}getLeveragedTokenMarketInfo(e){return this.getPrivate("/spot/v3/private/reference",{ltCode:e})}purchaseLeveragedToken(e,t,r){return this.postPrivate("/spot/v3/private/purchase",{ltCode:e,ltAmount:t,serialNo:r})}redeemLeveragedToken(e,t,r){return this.postPrivate("/spot/v3/private/redeem",{ltCode:e,ltAmount:t,serialNo:r})}getLeveragedTokenPRHistory(e){return this.getPrivate("/spot/v3/private/record",e)}borrowCrossMarginLoan(e,t){return this.postPrivate("/spot/v3/private/cross-margin-loan",{coin:e,qty:t})}repayCrossMarginLoan(e,t){return this.postPrivate("/spot/v3/private/cross-margin-repay",{coin:e,qty:t})}getCrossMarginBorrowingInfo(e){return this.getPrivate("/spot/v3/private/cross-margin-orders",e)}getCrossMarginAccountInfo(){return this.getPrivate("/spot/v3/private/cross-margin-account")}getCrossMarginInterestQuota(e){return this.getPrivate("/spot/v3/private/cross-margin-loan-info",{coin:e})}getCrossMarginRepaymentHistory(e){return this.getPrivate("/spot/v3/private/cross-margin-repay-history",e)}}t.SpotClientV3=a},5847:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function o(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SpotClient=void 0;const s=n(r(1154)),o=r(8584);class a extends s.default{getClientType(){return o.REST_CLIENT_TYPE_ENUM.spot}fetchServerTime(){return this.getServerTime()}getServerTime(){return i(this,void 0,void 0,(function*(){return(yield this.get("/spot/v1/time")).result.serverTime}))}getSymbols(){return this.get("/spot/v1/symbols")}getOrderBook(e,t){return this.get("/spot/quote/v1/depth",{symbol:e,limit:t})}getMergedOrderBook(e,t,r){return this.get("/spot/quote/v1/depth/merged",{symbol:e,scale:t,limit:r})}getTrades(e,t){return this.get("/spot/quote/v1/trades",{symbol:e,limit:t})}getCandles(e,t,r,i,n){return this.get("/spot/quote/v1/kline",{symbol:e,interval:t,limit:r,startTime:i,endTime:n})}get24hrTicker(e){return this.get("/spot/quote/v1/ticker/24hr",{symbol:e})}getLastTradedPrice(e){return this.get("/spot/quote/v1/ticker/price",{symbol:e})}getBestBidAskPrice(e){return this.get("/spot/quote/v1/ticker/book_ticker",{symbol:e})}submitOrder(e){return this.postPrivate("/spot/v1/order",e)}getOrder(e){return this.getPrivate("/spot/v1/order",e)}cancelOrder(e){return this.deletePrivate("/spot/v1/order",e)}cancelOrderBatch(e){const t=e.orderTypes?e.orderTypes.join(","):void 0;return this.deletePrivate("/spot/order/batch-cancel",Object.assign(Object.assign({},e),{orderTypes:t}))}getOpenOrders(e,t,r){return this.getPrivate("/spot/v1/open-orders",{symbol:e,orderId:t,limit:r})}getPastOrders(e,t,r){return this.getPrivate("/spot/v1/history-orders",{symbol:e,orderId:t,limit:r})}getMyTrades(e,t,r,i){return this.getPrivate("/spot/v1/myTrades",{symbol:e,limit:t,fromId:r,toId:i})}getBalances(){return this.getPrivate("/spot/v1/account")}}t.SpotClient=a},8105:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(6093),t),n(r(4659),t),n(r(4412),t),n(r(2972),t),n(r(2869),t),n(r(8551),t)},7077:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},8885:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},130:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},4659:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(7077),t),n(r(130),t),n(r(8885),t),n(r(8029),t),n(r(3067),t),n(r(6631),t),n(r(4426),t),n(r(381),t),n(r(8002),t),n(r(1968),t),n(r(4332),t),n(r(9535),t),n(r(9831),t),n(r(9776),t),n(r(1071),t),n(r(3505),t),n(r(6416),t),n(r(307),t)},3067:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},8029:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},6631:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},1968:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},381:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},4426:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},8002:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},4332:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},9535:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},9831:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},9776:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},1071:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},307:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},3505:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},6416:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},4683:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},1451:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},6093:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(4683),t),n(r(1451),t),n(r(960),t),n(r(4001),t),n(r(6599),t),n(r(2614),t),n(r(8122),t),n(r(2397),t),n(r(1913),t),n(r(410),t),n(r(5147),t),n(r(6530),t),n(r(913),t)},960:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},4001:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2614:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},6599:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},8122:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2397:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},1913:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},410:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},913:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},5147:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},6530:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},4412:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2972:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},8551:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2869:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},962:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function o(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.UnifiedMarginClient=void 0;const s=r(3612),o=n(r(1154));class a extends o.default{getClientType(){return s.REST_CLIENT_TYPE_ENUM.v3}fetchServerTime(){return i(this,void 0,void 0,(function*(){const e=yield this.getServerTime();return Number(e.time_now)}))}getOrderBook(e,t,r){return this.get("/derivatives/v3/public/order-book/L2",{category:t,symbol:e,limit:r})}getCandles(e){return this.get("/derivatives/v3/public/kline",e)}getSymbolTicker(e,t){return this.get("/derivatives/v3/public/tickers",{category:e,symbol:t})}getInstrumentInfo(e){return this.get("/derivatives/v3/public/instruments-info",e)}getMarkPriceCandles(e){return this.get("/derivatives/v3/public/mark-price-kline",e)}getIndexPriceCandles(e){return this.get("/derivatives/v3/public/index-price-kline",e)}getFundingRateHistory(e){return this.get("/derivatives/v3/public/funding/history-funding-rate",e)}getRiskLimit(e,t){return this.get("/derivatives/v3/public/risk-limit/list",{category:e,symbol:t})}getOptionDeliveryPrice(e){return this.get("/derivatives/v3/public/delivery-price",e)}getTrades(e){return this.get("/derivatives/v3/public/recent-trade",e)}getOpenInterest(e){return this.get("/derivatives/v3/public/open-interest",e)}submitOrder(e){return this.postPrivate("/unified/v3/private/order/create",e)}modifyOrder(e){return this.postPrivate("/unified/v3/private/order/replace",e)}cancelOrder(e){return this.postPrivate("/unified/v3/private/order/cancel",e)}getActiveOrders(e){return this.getPrivate("/unified/v3/private/order/unfilled-orders",e)}getHistoricOrders(e){return this.getPrivate("/unified/v3/private/order/list",e)}batchSubmitOrders(e,t){return this.postPrivate("/unified/v3/private/order/create-batch",{category:e,request:t})}batchReplaceOrders(e,t){return this.postPrivate("/unified/v3/private/order/replace-batch",{category:e,request:t})}batchCancelOrders(e,t){return this.postPrivate("/unified/v3/private/order/cancel-batch",{category:e,request:t})}cancelAllOrders(e){return this.postPrivate("/unified/v3/private/order/cancel-all",e)}getPositions(e){return this.getPrivate("/unified/v3/private/position/list",e)}setLeverage(e,t,r,i){return this.postPrivate("/unified/v3/private/position/set-leverage",{category:e,symbol:t,buyLeverage:r,sellLeverage:i})}setTPSLMode(e,t,r){return this.postPrivate("/unified/v3/private/position/tpsl/switch-mode",{category:e,symbol:t,tpSlMode:r})}setRiskLimit(e,t,r,i){return this.postPrivate("/unified/v3/private/position/set-risk-limit",{category:e,symbol:t,riskId:r,positionIdx:i})}setTPSL(e){return this.postPrivate("/unified/v3/private/position/trading-stop",e)}get7DayTradingHistory(e){return this.getPrivate("/unified/v3/private/execution/list",e)}getOptionsSettlementHistory(e){return this.getPrivate("/unified/v3/private/delivery-record",e)}getUSDCPerpetualSettlementHistory(e){return this.getPrivate("/unified/v3/private/settlement-record",e)}getBalances(e){return this.getPrivate("/unified/v3/private/account/wallet/balance",{coin:e})}upgradeToUnifiedMargin(){return this.postPrivate("/unified/v3/private/account/upgrade-unified-account")}getTransactionLog(e){return this.getPrivate("/unified/v3/private/account/transaction-log",e)}transferFunds(e){return this.postPrivate("/asset/v1/private/transfer",e)}getCoinExchangeHistory(e){return this.getPrivate("/asset/v2/private/exchange/exchange-order-all",e)}getBorrowHistory(e){return this.getPrivate("/unified/v3/private/account/borrow-history",e)}getBorrowRate(e){return this.getPrivate("/unified/v3/private/account/borrow-rate",{currency:e})}getServerTime(){return this.get("/v2/public/time")}getAnnouncements(){return this.get("/v2/public/announcement")}}t.UnifiedMarginClient=a},6732:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function o(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.USDCOptionClient=void 0;const s=r(3612),o=n(r(1154));class a extends o.default{getClientType(){return s.REST_CLIENT_TYPE_ENUM.v3}fetchServerTime(){return i(this,void 0,void 0,(function*(){const e=yield this.getServerTime();return Number(e.time_now)}))}getOrderBook(e){return this.get("/option/usdc/openapi/public/v1/order-book",{symbol:e})}getContractInfo(e){return this.get("/option/usdc/openapi/public/v1/symbols",e)}getSymbolTicker(e){return this.get("/option/usdc/openapi/public/v1/tick",{symbol:e})}getDeliveryPrice(e){return this.get("/option/usdc/openapi/public/v1/delivery-price",e)}getLast500Trades(e){return this.get("/option/usdc/openapi/public/v1/query-trade-latest",e)}getHistoricalVolatility(e){return this.get("/option/usdc/openapi/public/v1/query-historical-volatility",e)}submitOrder(e){return this.postPrivate("/option/usdc/openapi/private/v1/place-order",e)}batchSubmitOrders(e){return this.postPrivate("/option/usdc/openapi/private/v1/batch-place-orders",{orderRequest:e})}modifyOrder(e){return this.postPrivate("/option/usdc/openapi/private/v1/replace-order",e)}batchModifyOrders(e){return this.postPrivate("/option/usdc/openapi/private/v1/batch-replace-orders",{replaceOrderRequest:e})}cancelOrder(e){return this.postPrivate("/option/usdc/openapi/private/v1/cancel-order",e)}batchCancelOrders(e){return this.postPrivate("/option/usdc/openapi/private/v1/batch-cancel-orders",{cancelRequest:e})}cancelActiveOrders(e){return this.postPrivate("/option/usdc/openapi/private/v1/cancel-all",e)}getActiveRealtimeOrders(e){return this.getPrivate("/option/usdc/openapi/private/v1/trade/query-active-orders",e)}getActiveOrders(e){return this.postPrivate("/option/usdc/openapi/private/v1/query-active-orders",e)}getHistoricOrders(e){return this.postPrivate("/option/usdc/openapi/private/v1/query-order-history",e)}getOrderExecutionHistory(e){return this.postPrivate("/option/usdc/openapi/private/v1/execution-list",e)}getTransactionLog(e){return this.postPrivate("/option/usdc/openapi/private/v1/query-transaction-log",e)}getBalances(){return this.postPrivate("/option/usdc/openapi/private/v1/query-wallet-balance")}getAssetInfo(e){return this.postPrivate("/option/usdc/openapi/private/v1/query-asset-info",{baseCoin:e})}setMarginMode(e){return this.postPrivate("/option/usdc/private/asset/account/setMarginMode",{setMarginMode:e})}getMarginMode(){return this.postPrivate("/option/usdc/openapi/private/v1/query-margin-info")}getPositions(e){return this.postPrivate("/option/usdc/openapi/private/v1/query-position",e)}getDeliveryHistory(e){return this.postPrivate("/option/usdc/openapi/private/v1/query-delivery-list",e)}getPositionsInfoUponExpiry(e){return this.postPrivate("/option/usdc/openapi/private/v1/query-position-exp-date",e)}modifyMMP(e){return this.postPrivate("/option/usdc/openapi/private/v1/mmp-modify",e)}resetMMP(e){return this.postPrivate("/option/usdc/openapi/private/v1/mmp-reset",{currency:e})}queryMMPState(e){return this.postPrivate("/option/usdc/openapi/private/v1/get-mmp-state",{baseCoin:e})}getServerTime(){return this.get("/v2/public/time")}}t.USDCOptionClient=a},9065:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function o(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.USDCPerpetualClient=void 0;const s=r(3612),o=n(r(1154));class a extends o.default{getClientType(){return s.REST_CLIENT_TYPE_ENUM.v3}fetchServerTime(){return i(this,void 0,void 0,(function*(){const e=yield this.getServerTime();return Number(e.time_now)}))}getOrderBook(e){return this.get("/perpetual/usdc/openapi/public/v1/order-book",{symbol:e})}getContractInfo(e){return this.get("/perpetual/usdc/openapi/public/v1/symbols",e)}getSymbolTicker(e){return this.get("/perpetual/usdc/openapi/public/v1/tick",{symbol:e})}getCandles(e){return this.get("/perpetual/usdc/openapi/public/v1/kline/list",e)}getMarkPrice(e){return this.get("/perpetual/usdc/openapi/public/v1/mark-price-kline",e)}getIndexPrice(e){return this.get("/perpetual/usdc/openapi/public/v1/index-price-kline",e)}getIndexPremium(e){return this.get("/perpetual/usdc/openapi/public/v1/premium-index-kline",e)}getOpenInterest(e){return this.get("/perpetual/usdc/openapi/public/v1/open-interest",e)}getLargeOrders(e){return this.get("/perpetual/usdc/openapi/public/v1/big-deal",e)}getLongShortRatio(e){return this.get("/perpetual/usdc/openapi/public/v1/account-ratio",e)}getLast500Trades(e){return this.get("/option/usdc/openapi/public/v1/query-trade-latest",e)}submitOrder(e){return this.postPrivate("/perpetual/usdc/openapi/private/v1/place-order",e)}modifyOrder(e){return this.postPrivate("/perpetual/usdc/openapi/private/v1/replace-order",e)}cancelOrder(e){return this.postPrivate("/perpetual/usdc/openapi/private/v1/cancel-order",e)}cancelActiveOrders(e,t){return this.postPrivate("/perpetual/usdc/openapi/private/v1/cancel-all",{symbol:e,orderFilter:t})}getActiveOrders(e){return this.postPrivate("/option/usdc/openapi/private/v1/query-active-orders",e)}getHistoricOrders(e){return this.postPrivate("/option/usdc/openapi/private/v1/query-order-history",e)}getOrderExecutionHistory(e){return this.postPrivate("/option/usdc/openapi/private/v1/execution-list",e)}getTransactionLog(e){return this.postPrivate("/option/usdc/openapi/private/v1/query-transaction-log",e)}getBalances(){return this.postPrivate("/option/usdc/openapi/private/v1/query-wallet-balance")}getAssetInfo(e){return this.postPrivate("/option/usdc/openapi/private/v1/query-asset-info",{baseCoin:e})}setMarginMode(e){return this.postPrivate("/option/usdc/private/asset/account/setMarginMode",{setMarginMode:e})}getMarginMode(){return this.postPrivate("/option/usdc/openapi/private/v1/query-margin-info")}getPositions(e){return this.postPrivate("/option/usdc/openapi/private/v1/query-position",e)}setLeverage(e,t){return this.postPrivate("/perpetual/usdc/openapi/private/v1/position/leverage/save",{symbol:e,leverage:t})}getSettlementHistory(e){return this.postPrivate("/option/usdc/openapi/private/v1/session-settlement",e)}getRiskLimit(e){return this.getPrivate("/perpetual/usdc/openapi/public/v1/risk-limit/list",{symbol:e})}setRiskLimit(e,t){return this.postPrivate("/perpetual/usdc/openapi/private/v1/position/set-risk-limit",{symbol:e,riskId:t})}getLastFundingRate(e){return this.get("/perpetual/usdc/openapi/public/v1/prev-funding-rate",{symbol:e})}getPredictedFundingRate(e){return this.postPrivate("/perpetual/usdc/openapi/private/v1/predicted-funding",{symbol:e})}getServerTime(){return this.get("/v2/public/time")}}t.USDCPerpetualClient=a},1154:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function o(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(r(6425)),o=r(8584),a=r(3042),c="object"==typeof process&&"object"==typeof process.env&&process.env.BYBITTRACE;c&&s.default.interceptors.response.use((e=>(console.log(new Date,"Response:",{request:{url:e.config.url,method:e.config.method,data:e.config.data,headers:e.config.headers,params:e.config.params},response:{status:e.status,statusText:e.statusText,headers:e.headers,data:e.data}}),e))),t.default=class{constructor(e={},t={}){if(this.timeOffset=null,this.syncTimePromise=null,this.clientType=this.getClientType(),this.options=Object.assign({recv_window:5e3,strict_param_validation:!1,enable_time_sync:!1,sync_interval_ms:36e5,syncTimeBeforePrivateRequests:!1,encodeSerialisedValues:!0},e),this.globalRequestOptions=Object.assign(Object.assign({timeout:3e5},t),{headers:{}}),this.baseUrl=(0,o.getRestBaseUrl)(!!this.options.testnet,e),this.key=this.options.key,this.secret=this.options.secret,this.key&&!this.secret)throw new Error("API Key & Secret are both required for private endpoints");this.options.enable_time_sync&&(this.syncTime(),setInterval(this.syncTime.bind(this),+this.options.sync_interval_ms))}isSpotV1Client(){return this.clientType===o.REST_CLIENT_TYPE_ENUM.spot}get(e,t){return this._call("GET",e,t,!0)}getPrivate(e,t){return this._call("GET",e,t,!1)}post(e,t){return this._call("POST",e,t,!0)}postPrivate(e,t){return this._call("POST",e,t,!1)}deletePrivate(e,t){return this._call("DELETE",e,t,!1)}prepareSignParams(e,t,r,n){return i(this,void 0,void 0,(function*(){if(n)return{originalParams:r,paramsWithSign:r};if(!this.key||!this.secret)throw new Error("Private endpoints require api and private keys set");return null===this.timeOffset&&(yield this.syncTime()),this.options.syncTimeBeforePrivateRequests&&(this.timeOffset=yield this.fetchTimeOffset()),this.signRequest(r||{},e,t)}))}buildRequest(e,t,r,n){return i(this,void 0,void 0,(function*(){const i=Object.assign(Object.assign({},this.globalRequestOptions),{url:t,method:e});for(const e in r)void 0===r[e]&&delete r[e];if(n)return Object.assign(Object.assign({},i),{params:r});if(this.clientType===o.REST_CLIENT_TYPE_ENUM.v3){const t=yield this.prepareSignParams(e,"v5auth",r,n),s=Object.assign({"X-BAPI-SIGN-TYPE":2,"X-BAPI-API-KEY":this.key,"X-BAPI-TIMESTAMP":t.timestamp,"X-BAPI-SIGN":t.sign,"X-BAPI-RECV-WINDOW":t.recvWindow},i.headers);return"GET"===e?Object.assign(Object.assign({},i),{headers:s,params:t.originalParams}):Object.assign(Object.assign({},i),{headers:s,data:t.originalParams})}const s=yield this.prepareSignParams(e,"v2auth",r,n);return"GET"===e||this.isSpotV1Client()?Object.assign(Object.assign({},i),{params:s.paramsWithSign}):Object.assign(Object.assign({},i),{data:s.paramsWithSign})}))}_call(e,t,r,n){return i(this,void 0,void 0,(function*(){const i=[this.baseUrl,t].join(t.startsWith("/")?"":"/"),a=yield this.buildRequest(e,i,r,n);return c&&console.log("full request: ",a),(0,s.default)(a).then((e=>{if(200==e.status){const t=this.options.parseAPIRateLimits?(0,o.parseRateLimitHeaders)(e.headers,!0===this.options.throwOnFailedRateLimitParse):void 0;return Object.assign({rateLimitApi:t},e.data)}throw e})).catch((e=>this.parseException(e)))}))}parseException(e){if(!1===this.options.parse_exceptions)throw e;if(!e.response){if(!e.request)throw e.message;throw e}const t=e.response;throw{code:t.status,message:t.statusText,body:t.data,headers:t.headers,requestOptions:this.options}}signRequest(e,t,r){return i(this,void 0,void 0,(function*(){const i=Date.now()+(this.timeOffset||0),n={originalParams:Object.assign({},e),sign:"",timestamp:i,recvWindow:0,serializedParams:""};if(!this.key||!this.secret)return n;const s=this.key,c=n.originalParams.recv_window||this.options.recv_window||5e3,u=this.options.strict_param_validation,p=this.options.encodeSerialisedValues;if(n.recvWindow=c,"v5auth"===r){const e=!1,r="GET"===t?(0,o.serializeParams)(n.originalParams,u,e,p):JSON.stringify(n.originalParams),l=i+s+c+r;return n.sign=yield(0,a.signMessage)(l,this.secret),n.serializedParams=r,n}if("v2auth"===r){n.originalParams.api_key=s,n.originalParams.timestamp=i,c&&(this.isSpotV1Client()?n.originalParams.recvWindow=c:n.originalParams.recv_window=c);const e=!0,t=!1;return n.serializedParams=(0,o.serializeParams)(n.originalParams,u,e,t),n.sign=yield(0,a.signMessage)(n.serializedParams,this.secret),n.paramsWithSign=Object.assign(Object.assign({},n.originalParams),{sign:n.sign}),n}return n}))}syncTime(e){return e||this.options.enable_time_sync?(null!==this.syncTimePromise||(this.syncTimePromise=this.fetchTimeOffset().then((e=>{this.timeOffset=e,this.syncTimePromise=null}))),this.syncTimePromise):(this.timeOffset=0,Promise.resolve(!1))}fetchTimeOffset(){return i(this,void 0,void 0,(function*(){try{const e=Date.now(),t=yield this.fetchServerTime();if(!t||isNaN(t))throw new Error(`fetchServerTime() returned non-number: "${t}" typeof(${typeof t})`);const r=Date.now(),i=1e3*t,n=(r-e)/2;return Math.ceil(i-r+n)}catch(e){return console.error("Failed to fetch get time offset: ",e),0}}))}}},8963:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WsConnectionStateEnum=void 0;const i=r(2818);var n;!function(e){e[e.INITIAL=0]="INITIAL",e[e.CONNECTING=1]="CONNECTING",e[e.CONNECTED=2]="CONNECTED",e[e.CLOSING=3]="CLOSING",e[e.RECONNECTING=4]="RECONNECTING"}(n||(t.WsConnectionStateEnum=n={})),t.default=class{constructor(e){this.logger=e||i.DefaultLogger,this.wsState={}}get(e,t){return this.wsState[e]?this.wsState[e]:t?this.create(e):void 0}getKeys(){return Object.keys(this.wsState)}create(e){return this.hasExistingActiveConnection(e)&&this.logger.warning("WsStore setConnection() overwriting existing open connection: ",this.getWs(e)),this.wsState[e]={subscribedTopics:new Set,connectionState:n.INITIAL},this.get(e)}delete(e){if(this.hasExistingActiveConnection(e)){const t=this.getWs(e);this.logger.warning("WsStore deleting state for connection still open: ",t),null==t||t.close()}delete this.wsState[e]}hasExistingActiveConnection(e){return this.get(e)&&this.isWsOpen(e)}getWs(e){var t;return null===(t=this.get(e))||void 0===t?void 0:t.ws}setWs(e,t){return this.isWsOpen(e)&&this.logger.warning("WsStore setConnection() overwriting existing open connection: ",this.getWs(e)),this.get(e,!0).ws=t,t}isWsOpen(e){const t=this.getWs(e);return!!t&&t.readyState===t.OPEN}getConnectionState(e){return this.get(e,!0).connectionState}setConnectionState(e,t){this.get(e,!0).connectionState=t}isConnectionState(e,t){return this.getConnectionState(e)===t}getTopics(e){return this.get(e,!0).subscribedTopics}getTopicsByKey(){const e={};for(const t in this.wsState)e[t]=this.getTopics(t);return e}addTopic(e,t){return this.getTopics(e).add(t)}deleteTopic(e,t){return this.getTopics(e).delete(t)}}},3042:function(e,t){"use strict";var r=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function o(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.signMessage=void 0,t.signMessage=function(e,t){return r(this,void 0,void 0,(function*(){const r=new TextEncoder,i=yield window.crypto.subtle.importKey("raw",r.encode(t),{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),n=yield window.crypto.subtle.sign("HMAC",i,r.encode(e));return Array.prototype.map.call(new Uint8Array(n),(e=>("00"+e.toString(16)).slice(-2))).join("")}))}},3612:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(1154),t),n(r(2818),t),n(r(8584),t),n(r(4840),t),n(r(3380),t),n(r(8963),t)},2818:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultLogger=void 0,t.DefaultLogger={silly:(...e)=>{},debug:(...e)=>{console.log(e)},notice:(...e)=>{console.log(e)},info:(...e)=>{console.info(e)},warning:(...e)=>{console.error(e)},error:(...e)=>{console.error(e)}}},8584:(e,t)=>{"use strict";function r(e){return"object"==typeof e&&!!e&&"string"==typeof e.op&&"subscribe"===e.op}Object.defineProperty(t,"__esModule",{value:!0}),t.parseRateLimitHeaders=t.REST_CLIENT_TYPE_ENUM=t.isTopicSubscriptionSuccess=t.isTopicSubscriptionConfirmation=t.isWsPong=t.getRestBaseUrl=t.serializeParams=void 0,t.serializeParams=function(e={},t=!1,r=!0,i=!0){return(r?Object.keys(e).sort():Object.keys(e)).map((r=>{const n=i?encodeURIComponent(e[r]):e[r];if(!0===t&&void 0===n)throw new Error("Failed to sign API request due to undefined parameter");return`${r}=${n}`})).join("&")},t.getRestBaseUrl=function(e,t){return t.baseUrl?t.baseUrl:e?"https://api-testnet.bybit.com":"https://api.bybit.com"},t.isWsPong=function(e){return!!e&&(!(!e.pong&&!e.ping)||"pong"===e.op||"pong"===e.ret_msg||e.request&&"ping"===e.request.op&&"pong"===e.ret_msg&&!0===e.success)},t.isTopicSubscriptionConfirmation=r,t.isTopicSubscriptionSuccess=function(e){return!!r(e)&&!0===e.success},t.REST_CLIENT_TYPE_ENUM={accountAsset:"accountAsset",inverse:"inverse",inverseFutures:"inverseFutures",linear:"linear",spot:"spot",v3:"v3"},t.parseRateLimitHeaders=function(e,t){try{if(!e||"object"!=typeof e)return;const t=e["x-bapi-limit-status"],r=e["x-bapi-limit"],i=e["x-bapi-limit-reset-timestamp"];if(void 0===t||void 0===r||void 0===i)return;const n={remainingRequests:Number(t),maxRequests:Number(r),resetAtTimestamp:Number(i)};if(isNaN(n.remainingRequests)||isNaN(n.maxRequests)||isNaN(n.resetAtTimestamp))return;return n}catch(r){if(t)throw console.log(new Date,"parseRateLimitHeaders()","Failed to parse rate limit headers",{headers:e,exception:r}),r}}},4840:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isWsOrderbookEventV5=void 0,t.isWsOrderbookEventV5=function(e){return!("object"!=typeof e||!e||"string"!=typeof e.topic||"string"!=typeof e.type)&&["delta","snapshot"].includes(e.type)&&e.topic.startsWith("orderbook")}},3380:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.safeTerminateWs=t.neverGuard=t.WS_ERROR_ENUM=t.getUsdcWsKeyForTopic=t.getMaxTopicsPerSubscribeEvent=t.getWsUrl=t.getWsKeyForTopic=t.isPrivateWsTopic=t.PUBLIC_WS_KEYS=t.WS_AUTH_ON_CONNECT_KEYS=t.WS_KEY_MAP=t.WS_BASE_URL_MAP=void 0,t.WS_BASE_URL_MAP={inverse:{public:{livenet:"wss://stream.bybit.com/realtime",testnet:"wss://stream-testnet.bybit.com/realtime"},private:{livenet:"wss://stream.bybit.com/realtime",testnet:"wss://stream-testnet.bybit.com/realtime"}},linear:{public:{livenet:"wss://stream.bybit.com/realtime_public",livenet2:"wss://stream.bytick.com/realtime_public",testnet:"wss://stream-testnet.bybit.com/realtime_public"},private:{livenet:"wss://stream.bybit.com/realtime_private",livenet2:"wss://stream.bytick.com/realtime_private",testnet:"wss://stream-testnet.bybit.com/realtime_private"}},spot:{public:{livenet:"wss://stream.bybit.com/spot/quote/ws/v1",livenet2:"wss://stream.bybit.com/spot/quote/ws/v2",testnet:"wss://stream-testnet.bybit.com/spot/quote/ws/v1",testnet2:"wss://stream-testnet.bybit.com/spot/quote/ws/v2"},private:{livenet:"wss://stream.bybit.com/spot/ws",testnet:"wss://stream-testnet.bybit.com/spot/ws"}},spotv3:{public:{livenet:"wss://stream.bybit.com/spot/public/v3",testnet:"wss://stream-testnet.bybit.com/spot/public/v3"},private:{livenet:"wss://stream.bybit.com/spot/private/v3",testnet:"wss://stream-testnet.bybit.com/spot/private/v3"}},usdcOption:{public:{livenet:"wss://stream.bybit.com/trade/option/usdc/public/v1",livenet2:"wss://stream.bytick.com/trade/option/usdc/public/v1",testnet:"wss://stream-testnet.bybit.com/trade/option/usdc/public/v1"},private:{livenet:"wss://stream.bybit.com/trade/option/usdc/private/v1",livenet2:"wss://stream.bytick.com/trade/option/usdc/private/v1",testnet:"wss://stream-testnet.bybit.com/trade/option/usdc/private/v1"}},usdcPerp:{public:{livenet:"wss://stream.bybit.com/perpetual/ws/v1/realtime_public",livenet2:"wss://stream.bytick.com/perpetual/ws/v1/realtime_public",testnet:"wss://stream-testnet.bybit.com/perpetual/ws/v1/realtime_public"},private:{livenet:"wss://stream.bybit.com/trade/option/usdc/private/v1",livenet2:"wss://stream.bytick.com/trade/option/usdc/private/v1",testnet:"wss://stream-testnet.bybit.com/trade/option/usdc/private/v1"}},unifiedOption:{public:{livenet:"wss://stream.bybit.com/option/usdc/public/v3",testnet:"wss://stream-testnet.bybit.com/option/usdc/public/v3"},private:{livenet:"wss://stream.bybit.com/unified/private/v3",testnet:"wss://stream-testnet.bybit.com/unified/private/v3"}},unifiedPerp:{public:{livenet:"useBaseSpecificEndpoint",testnet:"useBaseSpecificEndpoint"},private:{livenet:"wss://stream.bybit.com/unified/private/v3",testnet:"wss://stream-testnet.bybit.com/unified/private/v3"}},unifiedPerpUSDT:{public:{livenet:"wss://stream.bybit.com/contract/usdt/public/v3",testnet:"wss://stream-testnet.bybit.com/contract/usdt/public/v3"}},unifiedPerpUSDC:{public:{livenet:"wss://stream.bybit.com/contract/usdc/public/v3",testnet:"wss://stream-testnet.bybit.com/contract/usdc/public/v3"}},contractUSDT:{public:{livenet:"wss://stream.bybit.com/contract/usdt/public/v3",testnet:"wss://stream-testnet.bybit.com/contract/usdt/public/v3"},private:{livenet:"wss://stream.bybit.com/contract/private/v3",testnet:"wss://stream-testnet.bybit.com/contract/private/v3"}},contractInverse:{public:{livenet:"wss://stream.bybit.com/contract/inverse/public/v3",testnet:"wss://stream-testnet.bybit.com/contract/inverse/public/v3"},private:{livenet:"wss://stream.bybit.com/contract/private/v3",testnet:"wss://stream-testnet.bybit.com/contract/private/v3"}},v5:{public:{livenet:"public topics are routed internally via the public wskeys",testnet:"public topics are routed internally via the public wskeys"},private:{livenet:"wss://stream.bybit.com/v5/private",testnet:"wss://stream-testnet.bybit.com/v5/private"}},v5SpotPublic:{public:{livenet:"wss://stream.bybit.com/v5/public/spot",testnet:"wss://stream-testnet.bybit.com/v5/public/spot"}},v5LinearPublic:{public:{livenet:"wss://stream.bybit.com/v5/public/linear",testnet:"wss://stream-testnet.bybit.com/v5/public/linear"}},v5InversePublic:{public:{livenet:"wss://stream.bybit.com/v5/public/inverse",testnet:"wss://stream-testnet.bybit.com/v5/public/inverse"}},v5OptionPublic:{public:{livenet:"wss://stream.bybit.com/v5/public/option",testnet:"wss://stream-testnet.bybit.com/v5/public/option"}}},t.WS_KEY_MAP={inverse:"inverse",linearPrivate:"linearPrivate",linearPublic:"linearPublic",spotPrivate:"spotPrivate",spotPublic:"spotPublic",spotV3Private:"spotV3Private",spotV3Public:"spotV3Public",usdcOptionPrivate:"usdcOptionPrivate",usdcOptionPublic:"usdcOptionPublic",usdcPerpPrivate:"usdcPerpPrivate",usdcPerpPublic:"usdcPerpPublic",unifiedPrivate:"unifiedPrivate",unifiedOptionPublic:"unifiedOptionPublic",unifiedPerpUSDTPublic:"unifiedPerpUSDTPublic",unifiedPerpUSDCPublic:"unifiedPerpUSDCPublic",contractUSDTPublic:"contractUSDTPublic",contractUSDTPrivate:"contractUSDTPrivate",contractInversePublic:"contractInversePublic",contractInversePrivate:"contractInversePrivate",v5SpotPublic:"v5SpotPublic",v5LinearPublic:"v5LinearPublic",v5InversePublic:"v5InversePublic",v5OptionPublic:"v5OptionPublic",v5Private:"v5Private"},t.WS_AUTH_ON_CONNECT_KEYS=[t.WS_KEY_MAP.spotV3Private,t.WS_KEY_MAP.usdcOptionPrivate,t.WS_KEY_MAP.usdcPerpPrivate,t.WS_KEY_MAP.unifiedPrivate,t.WS_KEY_MAP.contractUSDTPrivate,t.WS_KEY_MAP.contractInversePrivate,t.WS_KEY_MAP.v5Private],t.PUBLIC_WS_KEYS=[t.WS_KEY_MAP.linearPublic,t.WS_KEY_MAP.spotPublic,t.WS_KEY_MAP.spotV3Public,t.WS_KEY_MAP.usdcOptionPublic,t.WS_KEY_MAP.usdcPerpPublic,t.WS_KEY_MAP.unifiedOptionPublic,t.WS_KEY_MAP.unifiedPerpUSDTPublic,t.WS_KEY_MAP.unifiedPerpUSDCPublic,t.WS_KEY_MAP.contractUSDTPublic,t.WS_KEY_MAP.contractInversePublic,t.WS_KEY_MAP.v5SpotPublic,t.WS_KEY_MAP.v5LinearPublic,t.WS_KEY_MAP.v5InversePublic,t.WS_KEY_MAP.v5OptionPublic];const r=["stop_order","outboundAccountInfo","executionReport","ticketInfo","copyTradePosition","copyTradeOrder","copyTradeExecution","copyTradeWallet","user.openapi.option.position","user.openapi.option.trade","user.order","user.openapi.option.order","user.service","user.openapi.greeks","user.mmp.event","user.openapi.perp.position","user.openapi.perp.trade","user.openapi.perp.order","user.service","user.position.unifiedAccount","user.execution.unifiedAccount","user.order.unifiedAccount","user.wallet.unifiedAccount","user.greeks.unifiedAccount","user.position.contractAccount","user.execution.contractAccount","user.order.contractAccount","user.wallet.contractAccount","position","execution","order","wallet","greeks"];function i(e,t){return new Error(`Unhandled value exception "x", ${t}`)}t.isPrivateWsTopic=function(e){return r.includes(e)},t.getWsKeyForTopic=function(e,n,s,o){const a=!0===s||r.includes(n);switch(e){case"inverse":return t.WS_KEY_MAP.inverse;case"linear":return a?t.WS_KEY_MAP.linearPrivate:t.WS_KEY_MAP.linearPublic;case"spot":return a?t.WS_KEY_MAP.spotPrivate:t.WS_KEY_MAP.spotPublic;case"spotv3":return a?t.WS_KEY_MAP.spotV3Private:t.WS_KEY_MAP.spotV3Public;case"usdcOption":return a?t.WS_KEY_MAP.usdcOptionPrivate:t.WS_KEY_MAP.usdcOptionPublic;case"usdcPerp":return a?t.WS_KEY_MAP.usdcPerpPrivate:t.WS_KEY_MAP.usdcPerpPublic;case"unifiedOption":return a?t.WS_KEY_MAP.unifiedPrivate:t.WS_KEY_MAP.unifiedOptionPublic;case"unifiedPerp":{if(a)return t.WS_KEY_MAP.unifiedPrivate;const e=n.toUpperCase();if(-1!==e.indexOf("USDT"))return t.WS_KEY_MAP.unifiedPerpUSDTPublic;if(-1!==e.indexOf("USDC")||-1!==e.indexOf("PERP"))return t.WS_KEY_MAP.unifiedPerpUSDCPublic;throw new Error(`Failed to determine wskey for unified perps topic: "${n}"`)}case"contractInverse":return a?t.WS_KEY_MAP.contractInversePrivate:t.WS_KEY_MAP.contractInversePublic;case"contractUSDT":return a?t.WS_KEY_MAP.contractUSDTPrivate:t.WS_KEY_MAP.contractUSDTPublic;case"v5":if(a)return t.WS_KEY_MAP.v5Private;switch(o){case"spot":return t.WS_KEY_MAP.v5SpotPublic;case"linear":return t.WS_KEY_MAP.v5LinearPublic;case"inverse":return t.WS_KEY_MAP.v5InversePublic;case"option":return t.WS_KEY_MAP.v5OptionPublic;case void 0:throw new Error("Category cannot be undefined");default:throw i(0,"getWsKeyForTopic(v5): Unhandled v5 category")}default:throw i(0,"getWsKeyForTopic(): Unhandled market")}},t.getWsUrl=function(e,r,n,s){if(r)return r;const o=n?"testnet":"livenet";switch(e){case t.WS_KEY_MAP.linearPublic:return t.WS_BASE_URL_MAP.linear.public[o];case t.WS_KEY_MAP.linearPrivate:return t.WS_BASE_URL_MAP.linear.private[o];case t.WS_KEY_MAP.spotPublic:return t.WS_BASE_URL_MAP.spot.public[o];case t.WS_KEY_MAP.spotPrivate:return t.WS_BASE_URL_MAP.spot.private[o];case t.WS_KEY_MAP.spotV3Public:return t.WS_BASE_URL_MAP.spotv3.public[o];case t.WS_KEY_MAP.spotV3Private:return t.WS_BASE_URL_MAP.spotv3.private[o];case t.WS_KEY_MAP.inverse:return t.WS_BASE_URL_MAP.inverse.public[o];case t.WS_KEY_MAP.usdcOptionPublic:return t.WS_BASE_URL_MAP.usdcOption.public[o];case t.WS_KEY_MAP.usdcOptionPrivate:return t.WS_BASE_URL_MAP.usdcOption.private[o];case t.WS_KEY_MAP.usdcPerpPublic:return t.WS_BASE_URL_MAP.usdcPerp.public[o];case t.WS_KEY_MAP.usdcPerpPrivate:return t.WS_BASE_URL_MAP.usdcPerp.private[o];case t.WS_KEY_MAP.unifiedOptionPublic:return t.WS_BASE_URL_MAP.unifiedOption.public[o];case t.WS_KEY_MAP.unifiedPerpUSDTPublic:return t.WS_BASE_URL_MAP.unifiedPerpUSDT.public[o];case t.WS_KEY_MAP.unifiedPerpUSDCPublic:return t.WS_BASE_URL_MAP.unifiedPerpUSDC.public[o];case t.WS_KEY_MAP.unifiedPrivate:return t.WS_BASE_URL_MAP.unifiedPerp.private[o];case t.WS_KEY_MAP.contractInversePrivate:return t.WS_BASE_URL_MAP.contractInverse.private[o];case t.WS_KEY_MAP.contractInversePublic:return t.WS_BASE_URL_MAP.contractInverse.public[o];case t.WS_KEY_MAP.contractUSDTPrivate:return t.WS_BASE_URL_MAP.contractUSDT.private[o];case t.WS_KEY_MAP.contractUSDTPublic:return t.WS_BASE_URL_MAP.contractUSDT.public[o];case t.WS_KEY_MAP.v5Private:return t.WS_BASE_URL_MAP.v5.private[o];case t.WS_KEY_MAP.v5SpotPublic:return t.WS_BASE_URL_MAP.v5SpotPublic.public[o];case t.WS_KEY_MAP.v5LinearPublic:return t.WS_BASE_URL_MAP.v5LinearPublic.public[o];case t.WS_KEY_MAP.v5InversePublic:return t.WS_BASE_URL_MAP.v5InversePublic.public[o];case t.WS_KEY_MAP.v5OptionPublic:return t.WS_BASE_URL_MAP.v5OptionPublic.public[o];default:throw s.error("getWsUrl(): Unhandled wsKey: ",{category:"bybit-ws",wsKey:e}),i(0,"getWsUrl(): Unhandled wsKey")}},t.getMaxTopicsPerSubscribeEvent=function(e,r){switch(e){case"inverse":case"linear":case"usdcOption":case"usdcPerp":case"unifiedOption":case"unifiedPerp":case"spot":case"contractInverse":case"contractUSDT":case"v5":return r===t.WS_KEY_MAP.v5SpotPublic?10:null;case"spotv3":return 10;default:throw i(0,"getWsKeyForTopic(): Unhandled market")}},t.getUsdcWsKeyForTopic=function(e,i){return r.includes(e)?t.WS_KEY_MAP.usdcOptionPrivate:t.WS_KEY_MAP.usdcOptionPublic},t.WS_ERROR_ENUM={NOT_AUTHENTICATED_SPOT_V3:"-1004",API_ERROR_GENERIC:"10001",API_SIGN_AUTH_FAILED:"10003",USDC_OPTION_AUTH_FAILED:"3303006"},t.neverGuard=i,t.safeTerminateWs=function(e){e&&"function"==typeof e.terminate&&e.terminate()}},6118:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function o(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WebsocketClient=void 0;const s=r(4785),o=n(r(5591)),a=r(6011),c=r(4624),u=r(3327),p=r(5847),l=r(6732),d=r(9065),v=r(962),h=r(8873),g=r(3042),f=n(r(8963)),b=r(3612),m=r(827),P={category:"bybit-ws"};class _ extends s.EventEmitter{constructor(e,t){super(),this.pendingTopicsSubscriptions=[],this.logger=t||b.DefaultLogger,this.wsStore=new f.default(this.logger),this.options=Object.assign({testnet:!1,pongTimeout:1e3,pingInterval:1e4,reconnectTimeout:500,recvWindow:5e3,fetchTimeOffsetBeforeAuth:!1},e),this.options.restOptions=Object.assign(Object.assign({},this.options.restOptions),{testnet:this.options.testnet}),this.prepareRESTClient(),this.on("error",(()=>{}))}getWsStore(){return this.wsStore}isTestnet(){return!0===this.options.testnet}subscribeV5(e,t,r){const i=Array.isArray(e)?e:[e];return new Promise(((e,n)=>{i.forEach((i=>{const s=(0,b.getWsKeyForTopic)(this.options.market,i,r,t);return this.wsStore.addTopic(s,i),this.upsertPendingTopicsSubscriptions(s,i,e,n),this.wsStore.isConnectionState(s,b.WsConnectionStateEnum.CONNECTED)?this.requestSubscribeTopics(s,[i]):this.wsStore.isConnectionState(s,b.WsConnectionStateEnum.CONNECTING)||this.wsStore.isConnectionState(s,b.WsConnectionStateEnum.RECONNECTING)?void 0:this.connect(s)}))}))}subscribe(e,t){const r=Array.isArray(e)?e:[e];return"v5"===this.options.market&&r.forEach((e=>{if(!(0,b.isPrivateWsTopic)(e))throw new Error('For public "v5" websocket topics, use the subscribeV5() method & provide the category parameter')})),new Promise(((e,i)=>{r.forEach((r=>{const n=(0,b.getWsKeyForTopic)(this.options.market,r,t);return this.wsStore.addTopic(n,r),this.upsertPendingTopicsSubscriptions(n,r,e,i),this.wsStore.isConnectionState(n,b.WsConnectionStateEnum.CONNECTED)?this.requestSubscribeTopics(n,[r]):this.wsStore.isConnectionState(n,b.WsConnectionStateEnum.CONNECTING)||this.wsStore.isConnectionState(n,b.WsConnectionStateEnum.RECONNECTING)?void 0:this.connect(n)}))}))}upsertPendingTopicsSubscriptions(e,t,r,i){const n=this.pendingTopicsSubscriptions.find((t=>t.wsKey===e));n?n.pendingTopicsSubscriptions.add(t):this.pendingTopicsSubscriptions.push({wsKey:e,resolver:r,rejector:i,failedTopicsSubscriptions:new Set,pendingTopicsSubscriptions:new Set([t])})}unsubscribeV5(e,t,r){(Array.isArray(e)?e:[e]).forEach((e=>{const i=(0,b.getWsKeyForTopic)(this.options.market,e,r,t);this.wsStore.deleteTopic(i,e),this.removeTopicPendingSubscription(i,e),this.wsStore.isConnectionState(i,b.WsConnectionStateEnum.CONNECTED)&&this.requestUnsubscribeTopics(i,[e])}))}removeTopicPendingSubscription(e,t){const r=this.pendingTopicsSubscriptions.find((t=>t.wsKey===e));r&&(r.pendingTopicsSubscriptions.delete(t),r.pendingTopicsSubscriptions.size||(this.pendingTopicsSubscriptions=this.pendingTopicsSubscriptions.filter((t=>t.wsKey!==e))))}clearTopicsPendingSubscriptions(e){this.pendingTopicsSubscriptions=this.pendingTopicsSubscriptions.filter((t=>t.wsKey!==e))}unsubscribe(e,t){const r=Array.isArray(e)?e:[e];"v5"===this.options.market&&r.forEach((e=>{if(!(0,b.isPrivateWsTopic)(e))throw new Error('For public "v5" websocket topics, use the unsubscribeV5() method & provide the category parameter')})),r.forEach((e=>{const r=(0,b.getWsKeyForTopic)(this.options.market,e,t);this.wsStore.deleteTopic(r,e),this.removeTopicPendingSubscription(r,e),this.wsStore.isConnectionState(r,b.WsConnectionStateEnum.CONNECTED)&&this.requestUnsubscribeTopics(r,[e])}))}prepareRESTClient(){switch(this.options.market){case"inverse":this.restClient=new a.InverseClient(this.options.restOptions,this.options.requestOptions);break;case"linear":this.restClient=new c.LinearClient(this.options.restOptions,this.options.requestOptions);break;case"spot":this.restClient=new p.SpotClient(this.options.restOptions,this.options.requestOptions),this.connectPublic();break;case"spotv3":this.restClient=new u.SpotClientV3(this.options.restOptions,this.options.requestOptions);break;case"usdcOption":this.restClient=new l.USDCOptionClient(this.options.restOptions,this.options.requestOptions);break;case"usdcPerp":this.restClient=new d.USDCPerpetualClient(this.options.restOptions,this.options.requestOptions);break;case"unifiedOption":case"unifiedPerp":this.restClient=new v.UnifiedMarginClient(this.options.restOptions,this.options.requestOptions);break;case"contractInverse":case"contractUSDT":this.restClient=new h.ContractClient(this.options.restOptions,this.options.requestOptions);break;case"v5":this.restClient=new m.RestClientV5(this.options.restOptions,this.options.requestOptions);break;default:throw(0,b.neverGuard)(this.options.market,"prepareRESTClient(): Unhandled market")}}close(e,t){this.logger.info("Closing connection",Object.assign(Object.assign({},P),{wsKey:e})),this.setWsState(e,b.WsConnectionStateEnum.CLOSING),this.clearTimers(e);const r=this.getWs(e);null==r||r.close(),t&&(0,b.safeTerminateWs)(r)}closeAll(e){const t=this.wsStore.getKeys();this.logger.info(`Closing all ws connections: ${t}`),t.forEach((t=>{this.close(t,e)}))}connectAll(){switch(this.options.market){case"inverse":return[...this.connectPublic()];case"linear":case"spot":case"spotv3":case"usdcOption":case"usdcPerp":case"unifiedPerp":case"unifiedOption":case"contractUSDT":case"contractInverse":return[...this.connectPublic(),this.connectPrivate()];case"v5":return[this.connectPrivate()];default:throw(0,b.neverGuard)(this.options.market,"connectAll(): Unhandled market")}}connectPublic(){switch(this.options.market){case"inverse":return[this.connect(b.WS_KEY_MAP.inverse)];case"linear":return[this.connect(b.WS_KEY_MAP.linearPublic)];case"spot":return[this.connect(b.WS_KEY_MAP.spotPublic)];case"spotv3":return[this.connect(b.WS_KEY_MAP.spotV3Public)];case"usdcOption":return[this.connect(b.WS_KEY_MAP.usdcOptionPublic)];case"usdcPerp":return[this.connect(b.WS_KEY_MAP.usdcPerpPublic)];case"unifiedOption":return[this.connect(b.WS_KEY_MAP.unifiedOptionPublic)];case"unifiedPerp":return[this.connect(b.WS_KEY_MAP.unifiedPerpUSDTPublic),this.connect(b.WS_KEY_MAP.unifiedPerpUSDCPublic)];case"contractUSDT":return[this.connect(b.WS_KEY_MAP.contractUSDTPublic)];case"contractInverse":return[this.connect(b.WS_KEY_MAP.contractInversePublic)];case"v5":return[this.connect(b.WS_KEY_MAP.v5SpotPublic),this.connect(b.WS_KEY_MAP.v5LinearPublic),this.connect(b.WS_KEY_MAP.v5InversePublic),this.connect(b.WS_KEY_MAP.v5OptionPublic)];default:throw(0,b.neverGuard)(this.options.market,"connectPublic(): Unhandled market")}}connectPrivate(){switch(this.options.market){case"inverse":return this.connect(b.WS_KEY_MAP.inverse);case"linear":return this.connect(b.WS_KEY_MAP.linearPrivate);case"spot":return this.connect(b.WS_KEY_MAP.spotPrivate);case"spotv3":return this.connect(b.WS_KEY_MAP.spotV3Private);case"usdcOption":return this.connect(b.WS_KEY_MAP.usdcOptionPrivate);case"usdcPerp":return this.connect(b.WS_KEY_MAP.usdcPerpPrivate);case"unifiedPerp":case"unifiedOption":return this.connect(b.WS_KEY_MAP.unifiedPrivate);case"contractUSDT":return this.connect(b.WS_KEY_MAP.contractUSDTPrivate);case"contractInverse":return this.connect(b.WS_KEY_MAP.contractInversePrivate);case"v5":return this.connect(b.WS_KEY_MAP.v5Private);default:throw(0,b.neverGuard)(this.options.market,"connectPrivate(): Unhandled market")}}connect(e){return i(this,void 0,void 0,(function*(){try{if(this.wsStore.isWsOpen(e))return this.logger.error("Refused to connect to ws with existing active connection",Object.assign(Object.assign({},P),{wsKey:e})),this.wsStore.getWs(e);if(this.wsStore.isConnectionState(e,b.WsConnectionStateEnum.CONNECTING))return void this.logger.error("Refused to connect to ws, connection attempt already active",Object.assign(Object.assign({},P),{wsKey:e}));this.wsStore.getConnectionState(e)&&!this.wsStore.isConnectionState(e,b.WsConnectionStateEnum.INITIAL)||this.setWsState(e,b.WsConnectionStateEnum.CONNECTING);const t=yield this.getAuthParams(e),r=(0,b.getWsUrl)(e,this.options.wsUrl,this.isTestnet(),this.logger),i=this.connectToWsUrl(r+t,e);return this.wsStore.setWs(e,i)}catch(t){this.parseWsError("Connection failed",t,e),this.reconnectWithDelay(e,this.options.reconnectTimeout)}}))}parseWsError(e,t,r){if(!t.message)return this.logger.error(`${e} due to unexpected error: `,t),void this.emit("error",t);"Unexpected server response: 401"===t.message?this.logger.error(`${e} due to 401 authorization failure.`,Object.assign(Object.assign({},P),{wsKey:r})):this.wsStore.getConnectionState(r)!==b.WsConnectionStateEnum.CLOSING?(this.logger.error(`${e} due to unexpected response error: "${(null==t?void 0:t.msg)||(null==t?void 0:t.message)||t}"`,Object.assign(Object.assign({},P),{wsKey:r,error:t})),this.executeReconnectableClose(r,"unhandled onWsError")):this.logger.info(`${r} socket forcefully closed. Will not reconnect.`),this.emit("error",t)}getAuthParams(e){return i(this,void 0,void 0,(function*(){if(b.PUBLIC_WS_KEYS.includes(e))return this.logger.debug("Starting public only websocket client.",Object.assign(Object.assign({},P),{wsKey:e})),"";try{const{signature:t,expiresAt:r}=yield this.getWsAuthSignature(e),i={api_key:this.options.key,expires:r,signature:t};return"?"+(0,b.serializeParams)(i)}catch(t){return this.logger.error(t,Object.assign(Object.assign({},P),{wsKey:e})),""}}))}sendAuthRequest(e){return i(this,void 0,void 0,(function*(){try{const{signature:t,expiresAt:r}=yield this.getWsAuthSignature(e),i={op:"auth",args:[this.options.key,r,t],req_id:`${e}-auth`};return this.tryWsSend(e,JSON.stringify(i))}catch(t){this.logger.error(t,Object.assign(Object.assign({},P),{wsKey:e}))}}))}getWsAuthSignature(e){return i(this,void 0,void 0,(function*(){var t;const{key:r,secret:i}=this.options;if(!r||!i)throw this.logger.warning("Cannot authenticate websocket, either api or private keys missing.",Object.assign(Object.assign({},P),{wsKey:e})),new Error("Cannot auth - missing api or secret in config");this.logger.debug("Getting auth'd request params",Object.assign(Object.assign({},P),{wsKey:e}));const n=this.options.fetchTimeOffsetBeforeAuth&&(yield null===(t=this.restClient)||void 0===t?void 0:t.fetchTimeOffset())||0,s=this.options.recvWindow||5e3,o=Date.now()+n+s;return{expiresAt:o,signature:yield(0,g.signMessage)("GET/realtime"+o,i)}}))}reconnectWithDelay(e,t){var r;this.clearTimers(e),this.wsStore.getConnectionState(e)!==b.WsConnectionStateEnum.CONNECTING&&this.setWsState(e,b.WsConnectionStateEnum.RECONNECTING),(null===(r=this.wsStore.get(e))||void 0===r?void 0:r.activeReconnectTimer)&&this.clearReconnectTimer(e),this.wsStore.get(e,!0).activeReconnectTimer=setTimeout((()=>{this.logger.info("Reconnecting to websocket",Object.assign(Object.assign({},P),{wsKey:e})),this.clearReconnectTimer(e),this.connect(e)}),t)}ping(e){this.wsStore.get(e,!0).activePongTimer||(this.clearPongTimer(e),this.logger.silly("Sending ping",Object.assign(Object.assign({},P),{wsKey:e})),this.tryWsSend(e,JSON.stringify({op:"ping"})),this.wsStore.get(e,!0).activePongTimer=setTimeout((()=>this.executeReconnectableClose(e,"Pong timeout")),this.options.pongTimeout))}executeReconnectableClose(e,t){this.logger.info(`${t} - closing socket to reconnect`,Object.assign(Object.assign({},P),{wsKey:e,reason:t}));const r=this.wsStore.isWsOpen(e);this.clearPingTimer(e),this.clearPongTimer(e);const i=this.getWs(e);i&&(i.close(),(0,b.safeTerminateWs)(i)),r||(this.logger.info(`${t} - socket already closed - trigger immediate reconnect`,Object.assign(Object.assign({},P),{wsKey:e,reason:t})),this.reconnectWithDelay(e,this.options.reconnectTimeout))}clearTimers(e){this.clearPingTimer(e),this.clearPongTimer(e),this.clearReconnectTimer(e)}clearPingTimer(e){const t=this.wsStore.get(e);(null==t?void 0:t.activePingTimer)&&(clearInterval(t.activePingTimer),t.activePingTimer=void 0)}clearPongTimer(e){const t=this.wsStore.get(e);(null==t?void 0:t.activePongTimer)&&(clearTimeout(t.activePongTimer),t.activePongTimer=void 0)}clearReconnectTimer(e){const t=this.wsStore.get(e);(null==t?void 0:t.activeReconnectTimer)&&(clearTimeout(t.activeReconnectTimer),t.activeReconnectTimer=void 0)}requestSubscribeTopics(e,t){if(!t.length)return;const r=(0,b.getMaxTopicsPerSubscribeEvent)(this.options.market,e);if(r&&t.length>r){this.logger.silly(`Subscribing to topics in batches of ${r}`);for(let i=0;i<t.length;i+=r){const n=t.slice(i,i+r);this.logger.silly(`Subscribing to batch of ${n.length}`),this.requestSubscribeTopics(e,n)}return void this.logger.silly(`Finished batch subscribing to ${t.length} topics`)}const i=JSON.stringify({req_id:t.join(","),op:"subscribe",args:t});this.tryWsSend(e,i)}requestUnsubscribeTopics(e,t){if(!t.length)return;const r=(0,b.getMaxTopicsPerSubscribeEvent)(this.options.market,e);if(r&&t.length>r){this.logger.silly(`Unsubscribing to topics in batches of ${r}`);for(let i=0;i<t.length;i+=r){const n=t.slice(i,i+r);this.logger.silly(`Unsubscribing to batch of ${n.length}`),this.requestUnsubscribeTopics(e,n)}return void this.logger.silly(`Finished batch unsubscribing to ${t.length} topics`)}const i=JSON.stringify({op:"unsubscribe",args:t});this.tryWsSend(e,i)}tryWsSend(e,t){try{if(this.logger.silly("Sending upstream ws message: ",Object.assign(Object.assign({},P),{wsMessage:t,wsKey:e})),!e)throw new Error("Cannot send message due to no known websocket for this wsKey");const r=this.getWs(e);if(!r)throw new Error(`${e} socket not connected yet, call "connect(${e}) first then try again when the "open" event arrives`);r.send(t)}catch(r){this.logger.error("Failed to send WS message",Object.assign(Object.assign({},P),{wsMessage:t,wsKey:e,exception:r}))}}connectToWsUrl(e,t){var r;this.logger.silly(`Opening WS connection to URL: ${e}`,Object.assign(Object.assign({},P),{wsKey:t}));const i=null===(r=this.options.requestOptions)||void 0===r?void 0:r.agent,n=new o.default(e,void 0,i?{agent:i}:void 0);return n.onopen=e=>this.onWsOpen(e,t),n.onmessage=e=>this.onWsMessage(e,t),n.onerror=e=>this.parseWsError("Websocket onWsError",e,t),n.onclose=e=>this.onWsClose(e,t),n}onWsOpen(e,t){return i(this,void 0,void 0,(function*(){if(this.wsStore.isConnectionState(t,b.WsConnectionStateEnum.CONNECTING)?(this.logger.info("Websocket connected",Object.assign(Object.assign({},P),{wsKey:t,testnet:this.isTestnet(),market:this.options.market})),this.emit("open",{wsKey:t,event:e})):this.wsStore.isConnectionState(t,b.WsConnectionStateEnum.RECONNECTING)&&(this.logger.info("Websocket reconnected",Object.assign(Object.assign({},P),{wsKey:t})),this.emit("reconnected",{wsKey:t,event:e})),this.setWsState(t,b.WsConnectionStateEnum.CONNECTED),b.WS_AUTH_ON_CONNECT_KEYS.includes(t)&&(this.logger.info("Sending auth request..."),yield this.sendAuthRequest(t)),t!==b.WS_KEY_MAP.spotPublic&&t!==b.WS_KEY_MAP.spotPrivate){const e=[...this.wsStore.getTopics(t)];this.logger.info("Subscribing to topics",Object.assign(Object.assign({},P),{wsKey:t,topics:e})),this.requestSubscribeTopics(t,e)}this.wsStore.get(t,!0).activePingTimer=setInterval((()=>this.ping(t)),this.options.pingInterval)}))}onWsMessage(e,t){try{this.clearPongTimer(t);const r=JSON.parse(e&&e.data||e);if((0,b.isTopicSubscriptionConfirmation)(r)&&this.updatePendingTopicSubscriptionStatus(t,r),r.success||(null==r?void 0:r.pong)||(0,b.isWsPong)(r))return void((0,b.isWsPong)(r)?this.logger.silly("Received pong",Object.assign(Object.assign({},P),{wsKey:t})):this.emit("response",Object.assign(Object.assign({},r),{wsKey:t})));if(r.finalFragment)return this.emit("response",Object.assign(Object.assign({},r),{wsKey:t}));if(null==r?void 0:r.topic)return this.emit("update",Object.assign(Object.assign({},r),{wsKey:t}));if((null==r?void 0:r.code)||"error"===(null==r?void 0:r.type)||!1===(null==r?void 0:r.success))return this.emit("error",Object.assign(Object.assign({},r),{wsKey:t}));this.logger.warning("Unhandled/unrecognised ws event message",Object.assign(Object.assign({},P),{message:r,event:e,wsKey:t}))}catch(r){this.logger.error("Failed to parse ws event message",Object.assign(Object.assign({},P),{error:r,event:e,wsKey:t}))}}updatePendingTopicSubscriptionStatus(e,t){const r=t.req_id,i=this.pendingTopicsSubscriptions.find((t=>t.wsKey===e));if(!i)return;const n=r.split(",");(0,b.isTopicSubscriptionSuccess)(t)||n.forEach((e=>i.failedTopicsSubscriptions.add(e))),n.forEach((t=>{if(this.removeTopicPendingSubscription(e,t),i.pendingTopicsSubscriptions.size||i.failedTopicsSubscriptions.size||(i.resolver(),this.clearTopicsPendingSubscriptions(e)),!i.pendingTopicsSubscriptions.size&&i.failedTopicsSubscriptions.size){const t=`(${[...i.failedTopicsSubscriptions].toString()}) failed to subscribe`;i.rejector(t),this.clearTopicsPendingSubscriptions(e)}}))}onWsClose(e,t){this.logger.info("Websocket connection closed",Object.assign(Object.assign({},P),{wsKey:t})),this.wsStore.getConnectionState(t)!==b.WsConnectionStateEnum.CLOSING?(this.reconnectWithDelay(t,this.options.reconnectTimeout),this.emit("reconnect",{wsKey:t,event:e})):(this.setWsState(t,b.WsConnectionStateEnum.INITIAL),this.emit("close",{wsKey:t,event:e}))}getWs(e){return this.wsStore.getWs(e)}setWsState(e,t){this.wsStore.setConnectionState(e,t)}wrongMarketError(e){return new Error(`This WS client was instanced for the ${this.options.market} market. Make another WebsocketClient instance with "market: '${e}'" to listen to ${e} topics`)}subscribePublicSpotTrades(e,t){if("spot"!==this.options.market)throw this.wrongMarketError("spot");return this.tryWsSend(b.WS_KEY_MAP.spotPublic,JSON.stringify({topic:"trade",event:"sub",symbol:e,params:{binary:!!t}}))}subscribePublicSpotTradingPair(e,t){if("spot"!==this.options.market)throw this.wrongMarketError("spot");return this.tryWsSend(b.WS_KEY_MAP.spotPublic,JSON.stringify({symbol:e,topic:"realtimes",event:"sub",params:{binary:!!t}}))}subscribePublicSpotV1Kline(e,t,r){if("spot"!==this.options.market)throw this.wrongMarketError("spot");return this.tryWsSend(b.WS_KEY_MAP.spotPublic,JSON.stringify({symbol:e,topic:"kline_"+t,event:"sub",params:{binary:!!r}}))}subscribePublicSpotOrderbook(e,t,r,i){if("spot"!==this.options.market)throw this.wrongMarketError("spot");let n;switch(t){case"full":n="depth";break;case"merge":if(n="mergedDepth",!r)throw new Error("Dumpscale must be provided for merged orderbooks");break;case"delta":n="diffDepth"}const s={symbol:e,topic:n,event:"sub",params:{binary:!!i}};return r&&(s.params.dumpScale=r),this.tryWsSend(b.WS_KEY_MAP.spotPublic,JSON.stringify(s))}}t.WebsocketClient=_},4785:e=>{"use strict";var t,r="object"==typeof Reflect?Reflect:null,i=r&&"function"==typeof r.apply?r.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};t=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var n=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}e.exports=s,e.exports.once=function(e,t){return new Promise((function(r,i){function n(r){e.removeListener(t,s),i(r)}function s(){"function"==typeof e.removeListener&&e.removeListener("error",n),r([].slice.call(arguments))}g(e,t,s,{once:!0}),"error"!==t&&function(e,t,r){"function"==typeof e.on&&g(e,"error",t,{once:!0})}(e,n)}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var o=10;function a(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function u(e,t,r,i){var n,s,o,u;if(a(r),void 0===(s=e._events)?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),s=e._events),o=s[t]),void 0===o)o=s[t]=r,++e._eventsCount;else if("function"==typeof o?o=s[t]=i?[r,o]:[o,r]:i?o.unshift(r):o.push(r),(n=c(e))>0&&o.length>n&&!o.warned){o.warned=!0;var p=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");p.name="MaxListenersExceededWarning",p.emitter=e,p.type=t,p.count=o.length,u=p,console&&console.warn&&console.warn(u)}return e}function p(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function l(e,t,r){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},n=p.bind(i);return n.listener=r,i.wrapFn=n,n}function d(e,t,r){var i=e._events;if(void 0===i)return[];var n=i[t];return void 0===n?[]:"function"==typeof n?r?[n.listener||n]:[n]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(n):h(n,n.length)}function v(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function h(e,t){for(var r=new Array(t),i=0;i<t;++i)r[i]=e[i];return r}function g(e,t,r,i){if("function"==typeof e.on)i.once?e.once(t,r):e.on(t,r);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function n(s){i.once&&e.removeEventListener(t,n),r(s)}))}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(e){if("number"!=typeof e||e<0||n(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");o=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||n(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return c(this)},s.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,s=this._events;if(void 0!==s)n=n&&void 0===s.error;else if(!n)return!1;if(n){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=s[e];if(void 0===c)return!1;if("function"==typeof c)i(c,this,t);else{var u=c.length,p=h(c,u);for(r=0;r<u;++r)i(p[r],this,t)}return!0},s.prototype.addListener=function(e,t){return u(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return u(this,e,t,!0)},s.prototype.once=function(e,t){return a(t),this.on(e,l(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,l(this,e,t)),this},s.prototype.removeListener=function(e,t){var r,i,n,s,o;if(a(t),void 0===(i=this._events))return this;if(void 0===(r=i[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(n=-1,s=r.length-1;s>=0;s--)if(r[s]===t||r[s].listener===t){o=r[s].listener,n=s;break}if(n<0)return this;0===n?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,n),1===r.length&&(i[e]=r[0]),void 0!==i.removeListener&&this.emit("removeListener",e,o||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,r,i;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var n,s=Object.keys(r);for(i=0;i<s.length;++i)"removeListener"!==(n=s[i])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},s.prototype.listeners=function(e){return d(this,e,!0)},s.prototype.rawListeners=function(e){return d(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):v.call(e,t)},s.prototype.listenerCount=v,s.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},5591:(e,t,r)=>{var i=null;"undefined"!=typeof WebSocket?i=WebSocket:"undefined"!=typeof MozWebSocket?i=MozWebSocket:void 0!==r.g?i=r.g.WebSocket||r.g.MozWebSocket:"undefined"!=typeof window?i=window.WebSocket||window.MozWebSocket:"undefined"!=typeof self&&(i=self.WebSocket||self.MozWebSocket),e.exports=i},6425:(e,t,r)=>{"use strict";function i(e,t){return function(){return e.apply(t,arguments)}}const{toString:n}=Object.prototype,{getPrototypeOf:s}=Object,o=(a=Object.create(null),e=>{const t=n.call(e);return a[t]||(a[t]=t.slice(8,-1).toLowerCase())});var a;const c=e=>(e=e.toLowerCase(),t=>o(t)===e),u=e=>t=>typeof t===e,{isArray:p}=Array,l=u("undefined"),d=c("ArrayBuffer"),v=u("string"),h=u("function"),g=u("number"),f=e=>null!==e&&"object"==typeof e,b=e=>{if("object"!==o(e))return!1;const t=s(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)},m=c("Date"),P=c("File"),_=c("Blob"),y=c("FileList"),S=c("URLSearchParams");function O(e,t,{allOwnKeys:r=!1}={}){if(null==e)return;let i,n;if("object"!=typeof e&&(e=[e]),p(e))for(i=0,n=e.length;i<n;i++)t.call(null,e[i],i,e);else{const n=r?Object.getOwnPropertyNames(e):Object.keys(e),s=n.length;let o;for(i=0;i<s;i++)o=n[i],t.call(null,e[o],o,e)}}function T(e,t){t=t.toLowerCase();const r=Object.keys(e);let i,n=r.length;for(;n-- >0;)if(i=r[n],t===i.toLowerCase())return i;return null}const E="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:r.g,w=e=>!l(e)&&e!==E,A=(C="undefined"!=typeof Uint8Array&&s(Uint8Array),e=>C&&e instanceof C);var C;const M=c("HTMLFormElement"),R=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),I=c("RegExp"),N=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),i={};O(r,((r,n)=>{let s;!1!==(s=t(r,n,e))&&(i[n]=s||r)})),Object.defineProperties(e,i)},W="abcdefghijklmnopqrstuvwxyz",k="0123456789",L={DIGIT:k,ALPHA:W,ALPHA_DIGIT:W+W.toUpperCase()+k},j=c("AsyncFunction");var D={isArray:p,isArrayBuffer:d,isBuffer:function(e){return null!==e&&!l(e)&&null!==e.constructor&&!l(e.constructor)&&h(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||h(e.append)&&("formdata"===(t=o(e))||"object"===t&&h(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&d(e.buffer),t},isString:v,isNumber:g,isBoolean:e=>!0===e||!1===e,isObject:f,isPlainObject:b,isUndefined:l,isDate:m,isFile:P,isBlob:_,isRegExp:I,isFunction:h,isStream:e=>f(e)&&h(e.pipe),isURLSearchParams:S,isTypedArray:A,isFileList:y,forEach:O,merge:function e(){const{caseless:t}=w(this)&&this||{},r={},i=(i,n)=>{const s=t&&T(r,n)||n;b(r[s])&&b(i)?r[s]=e(r[s],i):b(i)?r[s]=e({},i):p(i)?r[s]=i.slice():r[s]=i};for(let e=0,t=arguments.length;e<t;e++)arguments[e]&&O(arguments[e],i);return r},extend:(e,t,r,{allOwnKeys:n}={})=>(O(t,((t,n)=>{r&&h(t)?e[n]=i(t,r):e[n]=t}),{allOwnKeys:n}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,r,i)=>{e.prototype=Object.create(t.prototype,i),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},toFlatObject:(e,t,r,i)=>{let n,o,a;const c={};if(t=t||{},null==e)return t;do{for(n=Object.getOwnPropertyNames(e),o=n.length;o-- >0;)a=n[o],i&&!i(a,e,t)||c[a]||(t[a]=e[a],c[a]=!0);e=!1!==r&&s(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},kindOf:o,kindOfTest:c,endsWith:(e,t,r)=>{e=String(e),(void 0===r||r>e.length)&&(r=e.length),r-=t.length;const i=e.indexOf(t,r);return-1!==i&&i===r},toArray:e=>{if(!e)return null;if(p(e))return e;let t=e.length;if(!g(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},forEachEntry:(e,t)=>{const r=(e&&e[Symbol.iterator]).call(e);let i;for(;(i=r.next())&&!i.done;){const r=i.value;t.call(e,r[0],r[1])}},matchAll:(e,t)=>{let r;const i=[];for(;null!==(r=e.exec(t));)i.push(r);return i},isHTMLForm:M,hasOwnProperty:R,hasOwnProp:R,reduceDescriptors:N,freezeMethods:e=>{N(e,((t,r)=>{if(h(e)&&-1!==["arguments","caller","callee"].indexOf(r))return!1;const i=e[r];h(i)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")}))}))},toObjectSet:(e,t)=>{const r={},i=e=>{e.forEach((e=>{r[e]=!0}))};return p(e)?i(e):i(String(e).split(t)),r},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,r){return t.toUpperCase()+r})),noop:()=>{},toFiniteNumber:(e,t)=>(e=+e,Number.isFinite(e)?e:t),findKey:T,global:E,isContextDefined:w,ALPHABET:L,generateString:(e=16,t=L.ALPHA_DIGIT)=>{let r="";const{length:i}=t;for(;e--;)r+=t[Math.random()*i|0];return r},isSpecCompliantForm:function(e){return!!(e&&h(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),r=(e,i)=>{if(f(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[i]=e;const n=p(e)?[]:{};return O(e,((e,t)=>{const s=r(e,i+1);!l(s)&&(n[t]=s)})),t[i]=void 0,n}}return e};return r(e,0)},isAsyncFn:j,isThenable:e=>e&&(f(e)||h(e))&&h(e.then)&&h(e.catch)};function U(e,t,r,i,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),i&&(this.request=i),n&&(this.response=n)}D.inherits(U,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:D.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const x=U.prototype,K={};function B(e){return D.isPlainObject(e)||D.isArray(e)}function F(e){return D.endsWith(e,"[]")?e.slice(0,-2):e}function q(e,t,r){return e?e.concat(t).map((function(e,t){return e=F(e),!r&&t?"["+e+"]":e})).join(r?".":""):t}["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{K[e]={value:e}})),Object.defineProperties(U,K),Object.defineProperty(x,"isAxiosError",{value:!0}),U.from=(e,t,r,i,n,s)=>{const o=Object.create(x);return D.toFlatObject(e,o,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),U.call(o,e.message,t,r,i,n),o.cause=e,o.name=e.name,s&&Object.assign(o,s),o};const Y=D.toFlatObject(D,{},null,(function(e){return/^is[A-Z]/.test(e)}));function V(e,t,r){if(!D.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const i=(r=D.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!D.isUndefined(t[e])}))).metaTokens,n=r.visitor||u,s=r.dots,o=r.indexes,a=(r.Blob||"undefined"!=typeof Blob&&Blob)&&D.isSpecCompliantForm(t);if(!D.isFunction(n))throw new TypeError("visitor must be a function");function c(e){if(null===e)return"";if(D.isDate(e))return e.toISOString();if(!a&&D.isBlob(e))throw new U("Blob is not supported. Use a Buffer instead.");return D.isArrayBuffer(e)||D.isTypedArray(e)?a&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function u(e,r,n){let a=e;if(e&&!n&&"object"==typeof e)if(D.endsWith(r,"{}"))r=i?r:r.slice(0,-2),e=JSON.stringify(e);else if(D.isArray(e)&&function(e){return D.isArray(e)&&!e.some(B)}(e)||(D.isFileList(e)||D.endsWith(r,"[]"))&&(a=D.toArray(e)))return r=F(r),a.forEach((function(e,i){!D.isUndefined(e)&&null!==e&&t.append(!0===o?q([r],i,s):null===o?r:r+"[]",c(e))})),!1;return!!B(e)||(t.append(q(n,r,s),c(e)),!1)}const p=[],l=Object.assign(Y,{defaultVisitor:u,convertValue:c,isVisitable:B});if(!D.isObject(e))throw new TypeError("data must be an object");return function e(r,i){if(!D.isUndefined(r)){if(-1!==p.indexOf(r))throw Error("Circular reference detected in "+i.join("."));p.push(r),D.forEach(r,(function(r,s){!0===(!(D.isUndefined(r)||null===r)&&n.call(t,r,D.isString(s)?s.trim():s,i,l))&&e(r,i?i.concat(s):[s])})),p.pop()}}(e),t}function G(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function H(e,t){this._pairs=[],e&&V(e,this,t)}const z=H.prototype;function $(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function J(e,t,r){if(!t)return e;const i=r&&r.encode||$,n=r&&r.serialize;let s;if(s=n?n(t,r):D.isURLSearchParams(t)?t.toString():new H(t,r).toString(i),s){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}z.append=function(e,t){this._pairs.push([e,t])},z.toString=function(e){const t=e?function(t){return e.call(this,t,G)}:G;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};var X=class{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){D.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},Q={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Z={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:H,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]};const ee="undefined"!=typeof window&&"undefined"!=typeof document,te=(re="undefined"!=typeof navigator&&navigator.product,ee&&["ReactNative","NativeScript","NS"].indexOf(re)<0);var re;const ie="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts;var ne={...Object.freeze({__proto__:null,hasBrowserEnv:ee,hasStandardBrowserWebWorkerEnv:ie,hasStandardBrowserEnv:te}),...Z};function se(e){function t(e,r,i,n){let s=e[n++];if("__proto__"===s)return!0;const o=Number.isFinite(+s),a=n>=e.length;return s=!s&&D.isArray(i)?i.length:s,a?(D.hasOwnProp(i,s)?i[s]=[i[s],r]:i[s]=r,!o):(i[s]&&D.isObject(i[s])||(i[s]=[]),t(e,r,i[s],n)&&D.isArray(i[s])&&(i[s]=function(e){const t={},r=Object.keys(e);let i;const n=r.length;let s;for(i=0;i<n;i++)s=r[i],t[s]=e[s];return t}(i[s])),!o)}if(D.isFormData(e)&&D.isFunction(e.entries)){const r={};return D.forEachEntry(e,((e,i)=>{t(function(e){return D.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),i,r,0)})),r}return null}const oe={transitional:Q,adapter:["xhr","http"],transformRequest:[function(e,t){const r=t.getContentType()||"",i=r.indexOf("application/json")>-1,n=D.isObject(e);if(n&&D.isHTMLForm(e)&&(e=new FormData(e)),D.isFormData(e))return i?JSON.stringify(se(e)):e;if(D.isArrayBuffer(e)||D.isBuffer(e)||D.isStream(e)||D.isFile(e)||D.isBlob(e))return e;if(D.isArrayBufferView(e))return e.buffer;if(D.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let s;if(n){if(r.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return V(e,new ne.classes.URLSearchParams,Object.assign({visitor:function(e,t,r,i){return ne.isNode&&D.isBuffer(e)?(this.append(t,e.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((s=D.isFileList(e))||r.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return V(s?{"files[]":e}:e,t&&new t,this.formSerializer)}}return n||i?(t.setContentType("application/json",!1),function(e,t,r){if(D.isString(e))try{return(0,JSON.parse)(e),D.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||oe.transitional,r=t&&t.forcedJSONParsing,i="json"===this.responseType;if(e&&D.isString(e)&&(r&&!this.responseType||i)){const r=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(e){if(r){if("SyntaxError"===e.name)throw U.from(e,U.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ne.classes.FormData,Blob:ne.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};D.forEach(["delete","get","head","post","put","patch"],(e=>{oe.headers[e]={}}));var ae=oe;const ce=D.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),ue=Symbol("internals");function pe(e){return e&&String(e).trim().toLowerCase()}function le(e){return!1===e||null==e?e:D.isArray(e)?e.map(le):String(e)}function de(e,t,r,i,n){return D.isFunction(i)?i.call(this,t,r):(n&&(t=r),D.isString(t)?D.isString(i)?-1!==t.indexOf(i):D.isRegExp(i)?i.test(t):void 0:void 0)}class ve{constructor(e){e&&this.set(e)}set(e,t,r){const i=this;function n(e,t,r){const n=pe(t);if(!n)throw new Error("header name must be a non-empty string");const s=D.findKey(i,n);(!s||void 0===i[s]||!0===r||void 0===r&&!1!==i[s])&&(i[s||t]=le(e))}const s=(e,t)=>D.forEach(e,((e,r)=>n(e,r,t)));return D.isPlainObject(e)||e instanceof this.constructor?s(e,t):D.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim())?s((e=>{const t={};let r,i,n;return e&&e.split("\n").forEach((function(e){n=e.indexOf(":"),r=e.substring(0,n).trim().toLowerCase(),i=e.substring(n+1).trim(),!r||t[r]&&ce[r]||("set-cookie"===r?t[r]?t[r].push(i):t[r]=[i]:t[r]=t[r]?t[r]+", "+i:i)})),t})(e),t):null!=e&&n(t,e,r),this}get(e,t){if(e=pe(e)){const r=D.findKey(this,e);if(r){const e=this[r];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=r.exec(e);)t[i[1]]=i[2];return t}(e);if(D.isFunction(t))return t.call(this,e,r);if(D.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=pe(e)){const r=D.findKey(this,e);return!(!r||void 0===this[r]||t&&!de(0,this[r],r,t))}return!1}delete(e,t){const r=this;let i=!1;function n(e){if(e=pe(e)){const n=D.findKey(r,e);!n||t&&!de(0,r[n],n,t)||(delete r[n],i=!0)}}return D.isArray(e)?e.forEach(n):n(e),i}clear(e){const t=Object.keys(this);let r=t.length,i=!1;for(;r--;){const n=t[r];e&&!de(0,this[n],n,e,!0)||(delete this[n],i=!0)}return i}normalize(e){const t=this,r={};return D.forEach(this,((i,n)=>{const s=D.findKey(r,n);if(s)return t[s]=le(i),void delete t[n];const o=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,r)=>t.toUpperCase()+r))}(n):String(n).trim();o!==n&&delete t[n],t[o]=le(i),r[o]=!0})),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return D.forEach(this,((r,i)=>{null!=r&&!1!==r&&(t[i]=e&&D.isArray(r)?r.join(", "):r)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([e,t])=>e+": "+t)).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const r=new this(e);return t.forEach((e=>r.set(e))),r}static accessor(e){const t=(this[ue]=this[ue]={accessors:{}}).accessors,r=this.prototype;function i(e){const i=pe(e);t[i]||(function(e,t){const r=D.toCamelCase(" "+t);["get","set","has"].forEach((i=>{Object.defineProperty(e,i+r,{value:function(e,r,n){return this[i].call(this,t,e,r,n)},configurable:!0})}))}(r,e),t[i]=!0)}return D.isArray(e)?e.forEach(i):i(e),this}}ve.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),D.reduceDescriptors(ve.prototype,(({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[r]=e}}})),D.freezeMethods(ve);var he=ve;function ge(e,t){const r=this||ae,i=t||r,n=he.from(i.headers);let s=i.data;return D.forEach(e,(function(e){s=e.call(r,s,n.normalize(),t?t.status:void 0)})),n.normalize(),s}function fe(e){return!(!e||!e.__CANCEL__)}function be(e,t,r){U.call(this,null==e?"canceled":e,U.ERR_CANCELED,t,r),this.name="CanceledError"}D.inherits(be,U,{__CANCEL__:!0});var me=ne.hasStandardBrowserEnv?{write(e,t,r,i,n,s){const o=[e+"="+encodeURIComponent(t)];D.isNumber(r)&&o.push("expires="+new Date(r).toGMTString()),D.isString(i)&&o.push("path="+i),D.isString(n)&&o.push("domain="+n),!0===s&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Pe(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}var _e=ne.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let r;function i(r){let i=r;return e&&(t.setAttribute("href",i),i=t.href),t.setAttribute("href",i),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return r=i(window.location.href),function(e){const t=D.isString(e)?i(e):e;return t.protocol===r.protocol&&t.host===r.host}}():function(){return!0};function ye(e,t){let r=0;const i=function(e,t){e=e||10;const r=new Array(e),i=new Array(e);let n,s=0,o=0;return t=void 0!==t?t:1e3,function(a){const c=Date.now(),u=i[o];n||(n=c),r[s]=a,i[s]=c;let p=o,l=0;for(;p!==s;)l+=r[p++],p%=e;if(s=(s+1)%e,s===o&&(o=(o+1)%e),c-n<t)return;const d=u&&c-u;return d?Math.round(1e3*l/d):void 0}}(50,250);return n=>{const s=n.loaded,o=n.lengthComputable?n.total:void 0,a=s-r,c=i(a);r=s;const u={loaded:s,total:o,progress:o?s/o:void 0,bytes:a,rate:c||void 0,estimated:c&&o&&s<=o?(o-s)/c:void 0,event:n};u[t?"download":"upload"]=!0,e(u)}}const Se={http:null,xhr:"undefined"!=typeof XMLHttpRequest&&function(e){return new Promise((function(t,r){let i=e.data;const n=he.from(e.headers).normalize();let s,o,{responseType:a,withXSRFToken:c}=e;function u(){e.cancelToken&&e.cancelToken.unsubscribe(s),e.signal&&e.signal.removeEventListener("abort",s)}if(D.isFormData(i))if(ne.hasStandardBrowserEnv||ne.hasStandardBrowserWebWorkerEnv)n.setContentType(!1);else if(!1!==(o=n.getContentType())){const[e,...t]=o?o.split(";").map((e=>e.trim())).filter(Boolean):[];n.setContentType([e||"multipart/form-data",...t].join("; "))}let p=new XMLHttpRequest;if(e.auth){const t=e.auth.username||"",r=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";n.set("Authorization","Basic "+btoa(t+":"+r))}const l=Pe(e.baseURL,e.url);function d(){if(!p)return;const i=he.from("getAllResponseHeaders"in p&&p.getAllResponseHeaders());!function(e,t,r){const i=r.config.validateStatus;r.status&&i&&!i(r.status)?t(new U("Request failed with status code "+r.status,[U.ERR_BAD_REQUEST,U.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r)):e(r)}((function(e){t(e),u()}),(function(e){r(e),u()}),{data:a&&"text"!==a&&"json"!==a?p.response:p.responseText,status:p.status,statusText:p.statusText,headers:i,config:e,request:p}),p=null}if(p.open(e.method.toUpperCase(),J(l,e.params,e.paramsSerializer),!0),p.timeout=e.timeout,"onloadend"in p?p.onloadend=d:p.onreadystatechange=function(){p&&4===p.readyState&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))&&setTimeout(d)},p.onabort=function(){p&&(r(new U("Request aborted",U.ECONNABORTED,e,p)),p=null)},p.onerror=function(){r(new U("Network Error",U.ERR_NETWORK,e,p)),p=null},p.ontimeout=function(){let t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const i=e.transitional||Q;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),r(new U(t,i.clarifyTimeoutError?U.ETIMEDOUT:U.ECONNABORTED,e,p)),p=null},ne.hasStandardBrowserEnv&&(c&&D.isFunction(c)&&(c=c(e)),c||!1!==c&&_e(l))){const t=e.xsrfHeaderName&&e.xsrfCookieName&&me.read(e.xsrfCookieName);t&&n.set(e.xsrfHeaderName,t)}void 0===i&&n.setContentType(null),"setRequestHeader"in p&&D.forEach(n.toJSON(),(function(e,t){p.setRequestHeader(t,e)})),D.isUndefined(e.withCredentials)||(p.withCredentials=!!e.withCredentials),a&&"json"!==a&&(p.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&p.addEventListener("progress",ye(e.onDownloadProgress,!0)),"function"==typeof e.onUploadProgress&&p.upload&&p.upload.addEventListener("progress",ye(e.onUploadProgress)),(e.cancelToken||e.signal)&&(s=t=>{p&&(r(!t||t.type?new be(null,e,p):t),p.abort(),p=null)},e.cancelToken&&e.cancelToken.subscribe(s),e.signal&&(e.signal.aborted?s():e.signal.addEventListener("abort",s)));const v=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(l);v&&-1===ne.protocols.indexOf(v)?r(new U("Unsupported protocol "+v+":",U.ERR_BAD_REQUEST,e)):p.send(i||null)}))}};D.forEach(Se,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}}));const Oe=e=>`- ${e}`,Te=e=>D.isFunction(e)||null===e||!1===e;var Ee=e=>{e=D.isArray(e)?e:[e];const{length:t}=e;let r,i;const n={};for(let s=0;s<t;s++){let t;if(r=e[s],i=r,!Te(r)&&(i=Se[(t=String(r)).toLowerCase()],void 0===i))throw new U(`Unknown adapter '${t}'`);if(i)break;n[t||"#"+s]=i}if(!i){const e=Object.entries(n).map((([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build")));throw new U("There is no suitable adapter to dispatch the request "+(t?e.length>1?"since :\n"+e.map(Oe).join("\n"):" "+Oe(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return i};function we(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new be(null,e)}function Ae(e){return we(e),e.headers=he.from(e.headers),e.data=ge.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Ee(e.adapter||ae.adapter)(e).then((function(t){return we(e),t.data=ge.call(e,e.transformResponse,t),t.headers=he.from(t.headers),t}),(function(t){return fe(t)||(we(e),t&&t.response&&(t.response.data=ge.call(e,e.transformResponse,t.response),t.response.headers=he.from(t.response.headers))),Promise.reject(t)}))}const Ce=e=>e instanceof he?{...e}:e;function Me(e,t){t=t||{};const r={};function i(e,t,r){return D.isPlainObject(e)&&D.isPlainObject(t)?D.merge.call({caseless:r},e,t):D.isPlainObject(t)?D.merge({},t):D.isArray(t)?t.slice():t}function n(e,t,r){return D.isUndefined(t)?D.isUndefined(e)?void 0:i(void 0,e,r):i(e,t,r)}function s(e,t){if(!D.isUndefined(t))return i(void 0,t)}function o(e,t){return D.isUndefined(t)?D.isUndefined(e)?void 0:i(void 0,e):i(void 0,t)}function a(r,n,s){return s in t?i(r,n):s in e?i(void 0,r):void 0}const c={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(e,t)=>n(Ce(e),Ce(t),!0)};return D.forEach(Object.keys(Object.assign({},e,t)),(function(i){const s=c[i]||n,o=s(e[i],t[i],i);D.isUndefined(o)&&s!==a||(r[i]=o)})),r}const Re={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{Re[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}}));const Ie={};Re.transitional=function(e,t,r){function i(e,t){return"[Axios v1.6.8] Transitional option '"+e+"'"+t+(r?". "+r:"")}return(r,n,s)=>{if(!1===e)throw new U(i(n," has been removed"+(t?" in "+t:"")),U.ERR_DEPRECATED);return t&&!Ie[n]&&(Ie[n]=!0,console.warn(i(n," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(r,n,s)}};var Ne={assertOptions:function(e,t,r){if("object"!=typeof e)throw new U("options must be an object",U.ERR_BAD_OPTION_VALUE);const i=Object.keys(e);let n=i.length;for(;n-- >0;){const s=i[n],o=t[s];if(o){const t=e[s],r=void 0===t||o(t,s,e);if(!0!==r)throw new U("option "+s+" must be "+r,U.ERR_BAD_OPTION_VALUE)}else if(!0!==r)throw new U("Unknown option "+s,U.ERR_BAD_OPTION)}},validators:Re};const We=Ne.validators;class ke{constructor(e){this.defaults=e,this.interceptors={request:new X,response:new X}}async request(e,t){try{return await this._request(e,t)}catch(e){if(e instanceof Error){let t;Error.captureStackTrace?Error.captureStackTrace(t={}):t=new Error;const r=t.stack?t.stack.replace(/^.+\n/,""):"";e.stack?r&&!String(e.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(e.stack+="\n"+r):e.stack=r}throw e}}_request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=Me(this.defaults,t);const{transitional:r,paramsSerializer:i,headers:n}=t;void 0!==r&&Ne.assertOptions(r,{silentJSONParsing:We.transitional(We.boolean),forcedJSONParsing:We.transitional(We.boolean),clarifyTimeoutError:We.transitional(We.boolean)},!1),null!=i&&(D.isFunction(i)?t.paramsSerializer={serialize:i}:Ne.assertOptions(i,{encode:We.function,serialize:We.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let s=n&&D.merge(n.common,n[t.method]);n&&D.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete n[e]})),t.headers=he.concat(s,n);const o=[];let a=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,o.unshift(e.fulfilled,e.rejected))}));const c=[];let u;this.interceptors.response.forEach((function(e){c.push(e.fulfilled,e.rejected)}));let p,l=0;if(!a){const e=[Ae.bind(this),void 0];for(e.unshift.apply(e,o),e.push.apply(e,c),p=e.length,u=Promise.resolve(t);l<p;)u=u.then(e[l++],e[l++]);return u}p=o.length;let d=t;for(l=0;l<p;){const e=o[l++],t=o[l++];try{d=e(d)}catch(e){t.call(this,e);break}}try{u=Ae.call(this,d)}catch(e){return Promise.reject(e)}for(l=0,p=c.length;l<p;)u=u.then(c[l++],c[l++]);return u}getUri(e){return J(Pe((e=Me(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}D.forEach(["delete","get","head","options"],(function(e){ke.prototype[e]=function(t,r){return this.request(Me(r||{},{method:e,url:t,data:(r||{}).data}))}})),D.forEach(["post","put","patch"],(function(e){function t(t){return function(r,i,n){return this.request(Me(n||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:r,data:i}))}}ke.prototype[e]=t(),ke.prototype[e+"Form"]=t(!0)}));var Le=ke;class je{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const r=this;this.promise.then((e=>{if(!r._listeners)return;let t=r._listeners.length;for(;t-- >0;)r._listeners[t](e);r._listeners=null})),this.promise.then=e=>{let t;const i=new Promise((e=>{r.subscribe(e),t=e})).then(e);return i.cancel=function(){r.unsubscribe(t)},i},e((function(e,i,n){r.reason||(r.reason=new be(e,i,n),t(r.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}static source(){let e;return{token:new je((function(t){e=t})),cancel:e}}}var De=je;const Ue={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ue).forEach((([e,t])=>{Ue[t]=e}));var xe=Ue;const Ke=function e(t){const r=new Le(t),n=i(Le.prototype.request,r);return D.extend(n,Le.prototype,r,{allOwnKeys:!0}),D.extend(n,r,null,{allOwnKeys:!0}),n.create=function(r){return e(Me(t,r))},n}(ae);Ke.Axios=Le,Ke.CanceledError=be,Ke.CancelToken=De,Ke.isCancel=fe,Ke.VERSION="1.6.8",Ke.toFormData=V,Ke.AxiosError=U,Ke.Cancel=Ke.CanceledError,Ke.all=function(e){return Promise.all(e)},Ke.spread=function(e){return function(t){return e.apply(null,t)}},Ke.isAxiosError=function(e){return D.isObject(e)&&!0===e.isAxiosError},Ke.mergeConfig=Me,Ke.AxiosHeaders=he,Ke.formToJSON=e=>se(D.isHTMLForm(e)?new FormData(e):e),Ke.getAdapter=Ee,Ke.HttpStatusCode=xe,Ke.default=Ke,e.exports=Ke}},t={};function r(i){var n=t[i];if(void 0!==n)return n.exports;var s=t[i]={exports:{}};return e[i].call(s.exports,s,s.exports,r),s.exports}return r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r(3867)})()));
//# sourceMappingURL=bybitapi.map